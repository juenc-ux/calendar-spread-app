{"ast":null,"code":"import React,{useState}from'react';import{Calendar,Download,Moon,Sun}from'lucide-react';import{Analytics}from'@vercel/analytics/react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ForwardVolCalculator(){const[date1,setDate1]=useState('2025-10-24');const[date2,setDate2]=useState('2025-10-31');const[iv1,setIv1]=useState('50');const[iv2,setIv2]=useState('40');const[spotPrice,setSpotPrice]=useState('100');const[strikePrice,setStrikePrice]=useState('100');const[riskFreeRate,setRiskFreeRate]=useState('4');const[dividend,setDividend]=useState('0');const[showCalendar1,setShowCalendar1]=useState(false);const[showCalendar2,setShowCalendar2]=useState(false);const[result,setResult]=useState(null);const[darkMode,setDarkMode]=useState(false);const[tradeHistory,setTradeHistory]=useState([]);const[callPriceSlider,setCallPriceSlider]=useState(null);const[putPriceSlider,setPutPriceSlider]=useState(null);const[adjustedFFCall,setAdjustedFFCall]=useState(null);const[adjustedFFPut,setAdjustedFFPut]=useState(null);const[pricingModel,setPricingModel]=useState('blackscholes');const[ticker,setTicker]=useState('');const[loading,setLoading]=useState(false);const[loadError,setLoadError]=useState(null);const[apiKey,setApiKey]=useState(localStorage.getItem('polygonKey')||'');const[showTickerDropdown,setShowTickerDropdown]=useState(false);const[filteredTickers,setFilteredTickers]=useState([]);const[volumeCallT1,setVolumeCallT1]=useState(null);const[volumeCallT2,setVolumeCallT2]=useState(null);const[volumePutT1,setVolumePutT1]=useState(null);const[volumePutT2,setVolumePutT2]=useState(null);const[oiCallT1,setOiCallT1]=useState(null);const[oiCallT2,setOiCallT2]=useState(null);const[oiPutT1,setOiPutT1]=useState(null);const[oiPutT2,setOiPutT2]=useState(null);const[showScanner,setShowScanner]=useState(false);const[scanResults,setScanResults]=useState([]);const[scanning,setScanning]=useState(false);const[minFF,setMinFF]=useState(30);const[scanProgress,setScanProgress]=useState({current:0,total:0});const[scanLogs,setScanLogs]=useState([]);const[dataSource,setDataSource]=useState(null);// Popular US stocks for autocomplete\nconst popularStocks=[{symbol:'AAPL',name:'Apple Inc.'},{symbol:'MSFT',name:'Microsoft Corporation'},{symbol:'GOOGL',name:'Alphabet Inc.'},{symbol:'AMZN',name:'Amazon.com Inc.'},{symbol:'NVDA',name:'NVIDIA Corporation'},{symbol:'META',name:'Meta Platforms Inc.'},{symbol:'TSLA',name:'Tesla Inc.'},{symbol:'BRK.B',name:'Berkshire Hathaway Inc.'},{symbol:'V',name:'Visa Inc.'},{symbol:'JPM',name:'JPMorgan Chase & Co.'},{symbol:'WMT',name:'Walmart Inc.'},{symbol:'JNJ',name:'Johnson & Johnson'},{symbol:'MA',name:'Mastercard Inc.'},{symbol:'PG',name:'Procter & Gamble Co.'},{symbol:'UNH',name:'UnitedHealth Group Inc.'},{symbol:'HD',name:'Home Depot Inc.'},{symbol:'DIS',name:'Walt Disney Co.'},{symbol:'BAC',name:'Bank of America Corp.'},{symbol:'ADBE',name:'Adobe Inc.'},{symbol:'CRM',name:'Salesforce Inc.'},{symbol:'NFLX',name:'Netflix Inc.'},{symbol:'CMCSA',name:'Comcast Corporation'},{symbol:'XOM',name:'Exxon Mobil Corporation'},{symbol:'COST',name:'Costco Wholesale Corp.'},{symbol:'PEP',name:'PepsiCo Inc.'},{symbol:'TMO',name:'Thermo Fisher Scientific Inc.'},{symbol:'ABT',name:'Abbott Laboratories'},{symbol:'NKE',name:'Nike Inc.'},{symbol:'CSCO',name:'Cisco Systems Inc.'},{symbol:'ORCL',name:'Oracle Corporation'},{symbol:'AMD',name:'Advanced Micro Devices Inc.'},{symbol:'INTC',name:'Intel Corporation'},{symbol:'QCOM',name:'Qualcomm Inc.'},{symbol:'TXN',name:'Texas Instruments Inc.'},{symbol:'AVGO',name:'Broadcom Inc.'},{symbol:'CVX',name:'Chevron Corporation'},{symbol:'KO',name:'Coca-Cola Co.'},{symbol:'MCD',name:'McDonald\\'s Corporation'},{symbol:'PYPL',name:'PayPal Holdings Inc.'},{symbol:'UBER',name:'Uber Technologies Inc.'},{symbol:'BA',name:'Boeing Co.'},{symbol:'CAT',name:'Caterpillar Inc.'},{symbol:'GE',name:'General Electric Co.'},{symbol:'F',name:'Ford Motor Co.'},{symbol:'GM',name:'General Motors Co.'},{symbol:'SBUX',name:'Starbucks Corporation'},{symbol:'PLTR',name:'Palantir Technologies Inc.'},{symbol:'COIN',name:'Coinbase Global Inc.'},{symbol:'SQ',name:'Block Inc.'},{symbol:'SNOW',name:'Snowflake Inc.'},{symbol:'SPY',name:'SPDR S&P 500 ETF Trust'},{symbol:'QQQ',name:'Invesco QQQ Trust'},{symbol:'IWM',name:'iShares Russell 2000 ETF'},{symbol:'DIA',name:'SPDR Dow Jones Industrial Average ETF'},{symbol:'VTI',name:'Vanguard Total Stock Market ETF'},{symbol:'VOO',name:'Vanguard S&P 500 ETF'},{symbol:'GLD',name:'SPDR Gold Trust'},{symbol:'SLV',name:'iShares Silver Trust'},{symbol:'TLT',name:'iShares 20+ Year Treasury Bond ETF'},{symbol:'XLE',name:'Energy Select Sector SPDR Fund'},{symbol:'XLF',name:'Financial Select Sector SPDR Fund'},{symbol:'XLK',name:'Technology Select Sector SPDR Fund'}];const handleTickerChange=value=>{const upper=value.toUpperCase();setTicker(upper);if(upper.length>0){const matches=popularStocks.filter(stock=>stock.symbol.startsWith(upper)||stock.name.toUpperCase().includes(upper)).slice(0,10);setFilteredTickers(matches);setShowTickerDropdown(matches.length>0);}else{setFilteredTickers([]);setShowTickerDropdown(false);}};const runFFScanner=async()=>{if(!apiKey||apiKey.trim()===''){setLoadError('Please enter your Polygon.io API key to use the scanner');return;}setScanning(true);setScanResults([]);setScanLogs([]);setLoadError(null);const stocksToScan=['SPY','QQQ','IWM','AAPL','MSFT','GOOGL','AMZN','NVDA','META','TSLA','AMD','NFLX','COIN','PLTR','GLD','TLT'];const results=[];const logs=[];const today=new Date();const allFridays=[];let currentDate=new Date(today);while(allFridays.length<8){if(currentDate.getDay()===5&&currentDate>today){allFridays.push(new Date(currentDate));}currentDate.setDate(currentDate.getDate()+1);}console.log('Scanner: Using real IV data for all expiration combinations');const now=new Date();const dayOfWeek=now.getUTCDay();const isWeekend=dayOfWeek===0||dayOfWeek===6;logs.push(\"\\uD83D\\uDD0D Scanning \".concat(stocksToScan.length,\" stocks for FF \\u2265 \").concat(minFF,\"%\"));logs.push(\"\\uD83D\\uDCC5 Testing all expiration combinations (next \".concat(allFridays.length,\" weeks)\"));logs.push(isWeekend?'⏰ Market closed (Weekend). Using last available IV data from Friday.':'⏰ Using most recent IV data (15-min delayed)');setScanLogs([...logs]);setScanProgress({current:0,total:stocksToScan.length});for(let i=0;i<stocksToScan.length;i++){const symbol=stocksToScan[i];setScanProgress({current:i+1,total:stocksToScan.length});try{const quoteUrl=\"https://api.polygon.io/v2/aggs/ticker/\".concat(symbol,\"/prev?adjusted=true&apiKey=\").concat(apiKey);const quoteResponse=await fetch(quoteUrl);if(!quoteResponse.ok)continue;const quoteData=await quoteResponse.json();if(!quoteData.results||quoteData.results.length===0)continue;const currentPrice=quoteData.results[0].c;const strike=Math.round(currentPrice/5)*5;const optionsUrl=\"https://api.polygon.io/v3/snapshot/options/\".concat(symbol,\"?apiKey=\").concat(apiKey);const optionsResponse=await fetch(optionsUrl);if(!optionsResponse.ok){console.error(\"\".concat(symbol,\": Failed to fetch options data\"));continue;}const optionsData=await optionsResponse.json();if(!optionsData.results||optionsData.results.length===0){logs.push(\"\\u274C \".concat(symbol,\": No options data from API\"));setScanLogs([...logs]);continue;}const callOptions=optionsData.results.filter(opt=>opt.details&&opt.details.contract_type==='call'&&opt.implied_volatility&&opt.implied_volatility>0&&Math.abs(opt.details.strike_price-strike)<20);if(callOptions.length===0){logs.push(\"\\u274C \".concat(symbol,\": No call options with IV data\"));setScanLogs([...logs]);continue;}const optionsByExpiration={};callOptions.forEach(opt=>{const expDate=opt.details.expiration_date;if(!optionsByExpiration[expDate]){optionsByExpiration[expDate]=[];}optionsByExpiration[expDate].push(opt);});const expirationDates=Object.keys(optionsByExpiration).sort();if(expirationDates.length<2){logs.push(\"\\u274C \".concat(symbol,\": Need at least 2 expirations (found \").concat(expirationDates.length,\")\"));setScanLogs([...logs]);continue;}let bestFF=-Infinity;let bestCombo=null;for(let a=0;a<expirationDates.length-1;a++){for(let b=a+1;b<expirationDates.length;b++){const exp1=expirationDates[a];const exp2=expirationDates[b];const exp1Opts=optionsByExpiration[exp1].sort((x,y)=>Math.abs(x.details.strike_price-strike)-Math.abs(y.details.strike_price-strike));const exp2Opts=optionsByExpiration[exp2].sort((x,y)=>Math.abs(x.details.strike_price-strike)-Math.abs(y.details.strike_price-strike));const iv1Data=exp1Opts[0].implied_volatility;const iv2Data=exp2Opts[0].implied_volatility;if(!iv1Data||!iv2Data)continue;const iv1=iv1Data;const iv2=iv2Data;const exp1DateObj=new Date(exp1);const exp2DateObj=new Date(exp2);const msPerDay=24*60*60*1000;const daysToExp1=(exp1DateObj-today)/msPerDay;const daysToExp2=(exp2DateObj-today)/msPerDay;if(daysToExp1<=0||daysToExp2<=0||daysToExp2<=daysToExp1)continue;const T1=daysToExp1/365;const T2=daysToExp2/365;const v1=iv1;const v2=iv2;const numerator=T2*v2*v2-T1*v1*v1;const denominator=T2-T1;if(numerator<0||denominator<=0)continue;const forwardVol=Math.sqrt(numerator/denominator);const forwardFactor=(v1/forwardVol-1)*100;if(forwardFactor>bestFF){bestFF=forwardFactor;bestCombo={exp1,exp2,iv1:v1*100,iv2:v2*100,dte1:daysToExp1,dte2:daysToExp2,fv:forwardVol*100,ff:forwardFactor,strike:exp1Opts[0].details.strike_price};}}}if(!bestCombo){logs.push(\"\\u274C \".concat(symbol,\": No valid combinations found\"));setScanLogs([...logs]);continue;}console.log(\"\".concat(symbol,\": Best FF=\").concat(bestCombo.ff.toFixed(2),\"% (\").concat(bestCombo.exp1,\" \\u2192 \").concat(bestCombo.exp2,\")\"));if(bestCombo.ff>=minFF){logs.push(\"\\u2705 \".concat(symbol,\": FF=\").concat(bestCombo.ff.toFixed(2),\"% (\").concat(bestCombo.exp1,\"\\u2192\").concat(bestCombo.exp2,\")\"));setScanLogs([...logs]);results.push({symbol,price:currentPrice.toFixed(2),strike:bestCombo.strike.toFixed(0),ff:bestCombo.ff.toFixed(2),fv:bestCombo.fv.toFixed(2),iv1:bestCombo.iv1.toFixed(1),iv2:bestCombo.iv2.toFixed(1),dte1:bestCombo.dte1.toFixed(1),dte2:bestCombo.dte2.toFixed(1),exp1:bestCombo.exp1,exp2:bestCombo.exp2});}else{logs.push(\"\\u26AA \".concat(symbol,\": Best FF=\").concat(bestCombo.ff.toFixed(2),\"% (below threshold)\"));setScanLogs([...logs]);}await new Promise(resolve=>setTimeout(resolve,100));}catch(error){console.error(\"Error scanning \".concat(symbol,\":\"),error);}}results.sort((a,b)=>parseFloat(b.ff)-parseFloat(a.ff));const finalMsg=\"\\uD83C\\uDFAF Scan complete: Found \".concat(results.length,\" stocks with FF \\u2265 \").concat(minFF,\"%\");console.log(finalMsg);logs.push(finalMsg);setScanLogs([...logs]);setScanResults(results);setScanning(false);setScanProgress({current:0,total:0});if(results.length===0){setLoadError(\"No stocks found with FF \\u2265 \".concat(minFF,\"%. Try lowering the threshold to 20% or 15%.\"));}};const selectTicker=symbol=>{setTicker(symbol);setShowTickerDropdown(false);setFilteredTickers([]);};const loadDemoData=()=>{// Demo data for SPY\nsetTicker('SPY');setSpotPrice('580.25');setStrikePrice('580');setDate1('2025-10-24');setDate2('2025-10-31');setIv1('12.5');setIv2('11.8');setRiskFreeRate('4.5');setDividend('1.2');setVolumeCallT1(45230);setVolumeCallT2(12450);setVolumePutT1(38920);setVolumePutT2(9870);setOiCallT1(128500);setOiCallT2(67300);setOiPutT1(145600);setOiPutT2(52100);setDataSource('demo');// Auto-calculate\nsetTimeout(()=>calculateResults(),100);};const fetchOptionData=async tickerSymbol=>{if(!tickerSymbol||tickerSymbol.trim()===''){setLoadError('Please enter a ticker symbol');return;}if(!apiKey||apiKey.trim()===''){setLoadError('Please enter your Polygon.io API key');return;}setLoading(true);setLoadError(null);setVolumeCallT1(null);setVolumeCallT2(null);setVolumePutT1(null);setVolumePutT2(null);setOiCallT1(null);setOiCallT2(null);setOiPutT1(null);setOiPutT2(null);setDataSource(null);try{const symbol=tickerSymbol.toUpperCase().trim();console.log('Fetching data for:',symbol);localStorage.setItem('polygonKey',apiKey);const today=new Date();const quoteUrl=\"https://api.polygon.io/v2/aggs/ticker/\".concat(symbol,\"/prev?adjusted=true&apiKey=\").concat(apiKey);console.log('Fetching quote from Polygon.io...');const quoteResponse=await fetch(quoteUrl);if(!quoteResponse.ok){throw new Error(\"API Error (\".concat(quoteResponse.status,\"). Check your API key.\"));}const quoteData=await quoteResponse.json();console.log('Quote data:',quoteData);if(quoteData.status==='ERROR'){throw new Error(quoteData.error||'Invalid ticker symbol');}if(!quoteData.results||quoteData.results.length===0){throw new Error('No price data available for this ticker');}const result=quoteData.results[0];const currentPrice=result.c;if(!currentPrice||currentPrice<=0){throw new Error('No valid price data available');}setSpotPrice(currentPrice.toFixed(2));const fridays=[];let currentDate=new Date(today);while(fridays.length<2){if(currentDate.getDay()===5&&currentDate>today){fridays.push(new Date(currentDate));}currentDate.setDate(currentDate.getDate()+1);}setDate1(fridays[0].toISOString().split('T')[0]);setDate2(fridays[1].toISOString().split('T')[0]);const roundedStrike=Math.round(currentPrice/5)*5;setStrikePrice(roundedStrike.toFixed(2));try{const exp1Date=fridays[0].toISOString().split('T')[0];const exp2Date=fridays[1].toISOString().split('T')[0];console.log('📊 Fetching options data for expirations:',exp1Date,exp2Date);console.log('💡 Using Option Chain Snapshot API with market data');// Track if we got real IV data\nlet gotRealIV1=false;let gotRealIV2=false;// ✅ USE OPTION CHAIN SNAPSHOT API - This returns IV, Volume, OI directly!\n// API: /v3/snapshot/options/{underlying_ticker}\n// Filter by expiration_date and contract_type to get ATM options\n// Fetch T1 options using Option Chain Snapshot API\nconst chain1Url=\"https://api.polygon.io/v3/snapshot/options/\".concat(symbol,\"?expiration_date.gte=\").concat(exp1Date,\"&expiration_date.lte=\").concat(exp1Date,\"&contract_type=call&limit=250&apiKey=\").concat(apiKey);console.log('🔍 Fetching T1 chain snapshot:',chain1Url);const chain1Response=await fetch(chain1Url);if(chain1Response.ok){const chain1Data=await chain1Response.json();console.log('📦 T1 Chain Snapshot Response:',chain1Data);if(chain1Data.status==='OK'&&chain1Data.results&&chain1Data.results.length>0){// Find ATM call option (closest strike to current price)\nconst atmCall=chain1Data.results.filter(opt=>{var _opt$details;return((_opt$details=opt.details)===null||_opt$details===void 0?void 0:_opt$details.strike_price)&&Math.abs(opt.details.strike_price-roundedStrike)<20;}).sort((a,b)=>Math.abs(a.details.strike_price-roundedStrike)-Math.abs(b.details.strike_price-roundedStrike))[0];if(atmCall){var _atmCall$details,_atmCall$details2,_atmCall$day;console.log('✅ Found T1 ATM Call:',(_atmCall$details=atmCall.details)===null||_atmCall$details===void 0?void 0:_atmCall$details.ticker,'Strike:',(_atmCall$details2=atmCall.details)===null||_atmCall$details2===void 0?void 0:_atmCall$details2.strike_price);// Extract IV from snapshot data\nif(atmCall.implied_volatility!==undefined&&atmCall.implied_volatility>0){const iv1Value=(atmCall.implied_volatility*100).toFixed(2);setIv1(iv1Value);gotRealIV1=true;console.log(\"\\u2705 T1 IV: \".concat(iv1Value,\"%\"));}else{console.log('⚠️ T1 IV not available:',atmCall.implied_volatility);}// Extract Volume\nif(((_atmCall$day=atmCall.day)===null||_atmCall$day===void 0?void 0:_atmCall$day.volume)!==undefined){setVolumeCallT1(atmCall.day.volume);console.log(\"\\u2705 T1 Call Volume: \".concat(atmCall.day.volume));}// Extract Open Interest\nif(atmCall.open_interest!==undefined){setOiCallT1(atmCall.open_interest);console.log(\"\\u2705 T1 Call OI: \".concat(atmCall.open_interest));}}else{console.log('⚠️ No ATM call found for T1 (strike ~',roundedStrike,')');}}else{console.log('⚠️ No results in T1 chain snapshot');}}else{const errorText=await chain1Response.text();console.error('❌ T1 chain snapshot failed:',chain1Response.status,errorText);}// Fetch T2 options using Option Chain Snapshot API\nconst chain2Url=\"https://api.polygon.io/v3/snapshot/options/\".concat(symbol,\"?expiration_date.gte=\").concat(exp2Date,\"&expiration_date.lte=\").concat(exp2Date,\"&contract_type=call&limit=250&apiKey=\").concat(apiKey);console.log('🔍 Fetching T2 chain snapshot:',chain2Url);const chain2Response=await fetch(chain2Url);if(chain2Response.ok){const chain2Data=await chain2Response.json();console.log('📦 T2 Chain Snapshot Response:',chain2Data);if(chain2Data.status==='OK'&&chain2Data.results&&chain2Data.results.length>0){// Find ATM call option\nconst atmCall2=chain2Data.results.filter(opt=>{var _opt$details2;return((_opt$details2=opt.details)===null||_opt$details2===void 0?void 0:_opt$details2.strike_price)&&Math.abs(opt.details.strike_price-roundedStrike)<20;}).sort((a,b)=>Math.abs(a.details.strike_price-roundedStrike)-Math.abs(b.details.strike_price-roundedStrike))[0];if(atmCall2){var _atmCall2$details,_atmCall2$details2,_atmCall2$day;console.log('✅ Found T2 ATM Call:',(_atmCall2$details=atmCall2.details)===null||_atmCall2$details===void 0?void 0:_atmCall2$details.ticker,'Strike:',(_atmCall2$details2=atmCall2.details)===null||_atmCall2$details2===void 0?void 0:_atmCall2$details2.strike_price);// Extract IV\nif(atmCall2.implied_volatility!==undefined&&atmCall2.implied_volatility>0){const iv2Value=(atmCall2.implied_volatility*100).toFixed(2);setIv2(iv2Value);gotRealIV2=true;console.log(\"\\u2705 T2 IV: \".concat(iv2Value,\"%\"));}else{console.log('⚠️ T2 IV not available:',atmCall2.implied_volatility);}// Extract Volume\nif(((_atmCall2$day=atmCall2.day)===null||_atmCall2$day===void 0?void 0:_atmCall2$day.volume)!==undefined){setVolumeCallT2(atmCall2.day.volume);console.log(\"\\u2705 T2 Call Volume: \".concat(atmCall2.day.volume));}// Extract Open Interest\nif(atmCall2.open_interest!==undefined){setOiCallT2(atmCall2.open_interest);console.log(\"\\u2705 T2 Call OI: \".concat(atmCall2.open_interest));}}else{console.log('⚠️ No ATM call found for T2 (strike ~',roundedStrike,')');}// Now get PUT options for T2 from same chain\nconst atmPut2=chain2Data.results.filter(opt=>{var _opt$details3,_opt$details4;return((_opt$details3=opt.details)===null||_opt$details3===void 0?void 0:_opt$details3.contract_type)==='put'&&((_opt$details4=opt.details)===null||_opt$details4===void 0?void 0:_opt$details4.strike_price)&&Math.abs(opt.details.strike_price-roundedStrike)<20;}).sort((a,b)=>Math.abs(a.details.strike_price-roundedStrike)-Math.abs(b.details.strike_price-roundedStrike))[0];if(atmPut2){var _atmPut2$day;if(((_atmPut2$day=atmPut2.day)===null||_atmPut2$day===void 0?void 0:_atmPut2$day.volume)!==undefined){setVolumePutT2(atmPut2.day.volume);console.log(\"\\u2705 T2 Put Volume: \".concat(atmPut2.day.volume));}if(atmPut2.open_interest!==undefined){setOiPutT2(atmPut2.open_interest);console.log(\"\\u2705 T2 Put OI: \".concat(atmPut2.open_interest));}}}else{console.log('⚠️ No results in T2 chain snapshot');}}else{const errorText=await chain2Response.text();console.error('❌ T2 chain snapshot failed:',chain2Response.status,errorText);}// Fetch PUT options for T1 using same approach\nconst chain1PutUrl=\"https://api.polygon.io/v3/snapshot/options/\".concat(symbol,\"?expiration_date.gte=\").concat(exp1Date,\"&expiration_date.lte=\").concat(exp1Date,\"&contract_type=put&limit=250&apiKey=\").concat(apiKey);console.log('🔍 Fetching T1 put chain snapshot');const chain1PutResponse=await fetch(chain1PutUrl);if(chain1PutResponse.ok){const chain1PutData=await chain1PutResponse.json();if(chain1PutData.status==='OK'&&chain1PutData.results&&chain1PutData.results.length>0){const atmPut1=chain1PutData.results.filter(opt=>{var _opt$details5;return((_opt$details5=opt.details)===null||_opt$details5===void 0?void 0:_opt$details5.strike_price)&&Math.abs(opt.details.strike_price-roundedStrike)<20;}).sort((a,b)=>Math.abs(a.details.strike_price-roundedStrike)-Math.abs(b.details.strike_price-roundedStrike))[0];if(atmPut1){var _atmPut1$day;if(((_atmPut1$day=atmPut1.day)===null||_atmPut1$day===void 0?void 0:_atmPut1$day.volume)!==undefined){setVolumePutT1(atmPut1.day.volume);console.log(\"\\u2705 T1 Put Volume: \".concat(atmPut1.day.volume));}if(atmPut1.open_interest!==undefined){setOiPutT1(atmPut1.open_interest);console.log(\"\\u2705 T1 Put OI: \".concat(atmPut1.open_interest));}}}}// Set data source based on whether we got real IV\nif(gotRealIV1&&gotRealIV2){setDataSource('real');console.log('✅ Real options data loaded with IV from Polygon.io!');}else if(gotRealIV1||gotRealIV2){setDataSource('partial');console.log('⚠️ Partial options data - some IV missing');}else{setDataSource('estimated');console.log('⚠️ No IV data available - using estimates');}}catch(optError){console.error('Options data error:',optError);setIv1('30');setIv2('28');setDataSource('estimated');}setLoading(false);setLoadError(null);setTimeout(()=>calculateResults(),100);}catch(error){console.error('Error fetching option data:',error);setLoadError(error.message||'Failed to load option data');setLoading(false);}};const getNextFridays=()=>{const today=new Date();let fridays=[];let currentDate=new Date(today);while(fridays.length<50){if(currentDate.getDay()===5){fridays.push(new Date(currentDate));}currentDate.setDate(currentDate.getDate()+1);}return fridays;};const normDist=x=>{const a1=0.254829592;const a2=-0.284496736;const a3=1.421413741;const a4=-1.453152027;const a5=1.061405429;const p=0.3275911;const sign=x<0?-1:1;x=Math.abs(x)/Math.sqrt(2);const t=1.0/(1.0+p*x);const y=1.0-((((a5*t+a4)*t+a3)*t+a2)*t+a1)*t*Math.exp(-x*x);return 0.5*(1.0+sign*y);};const blackScholesCall=function(S,K,T,r,sigma){let q=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(T<=0||sigma<=0)return Math.max(S-K,0);const sqrtT=Math.sqrt(T);const d1=(Math.log(S/K)+(r-q+0.5*sigma*sigma)*T)/(sigma*sqrtT);const d2=d1-sigma*sqrtT;const callPrice=S*Math.exp(-q*T)*normDist(d1)-K*Math.exp(-r*T)*normDist(d2);return Math.max(callPrice,0);};const blackScholesPut=function(S,K,T,r,sigma){let q=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(T<=0||sigma<=0)return Math.max(K-S,0);const sqrtT=Math.sqrt(T);const d1=(Math.log(S/K)+(r-q+0.5*sigma*sigma)*T)/(sigma*sqrtT);const d2=d1-sigma*sqrtT;const putPrice=K*Math.exp(-r*T)*normDist(-d2)-S*Math.exp(-q*T)*normDist(-d1);return Math.max(putPrice,0);};const black76Call=(F,K,T,r,sigma)=>{if(T<=0||sigma<=0)return Math.max(F-K,0);const sqrtT=Math.sqrt(T);const d1=(Math.log(F/K)+0.5*sigma*sigma*T)/(sigma*sqrtT);const d2=d1-sigma*sqrtT;const callPrice=Math.exp(-r*T)*(F*normDist(d1)-K*normDist(d2));return Math.max(callPrice,0);};const black76Put=(F,K,T,r,sigma)=>{if(T<=0||sigma<=0)return Math.max(K-F,0);const sqrtT=Math.sqrt(T);const d1=(Math.log(F/K)+0.5*sigma*sigma*T)/(sigma*sqrtT);const d2=d1-sigma*sqrtT;const putPrice=Math.exp(-r*T)*(K*normDist(-d2)-F*normDist(-d1));return Math.max(putPrice,0);};const binomialCall=function(S,K,T,r,sigma){let q=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;let steps=arguments.length>6&&arguments[6]!==undefined?arguments[6]:50;const dt=T/steps;const u=Math.exp(sigma*Math.sqrt(dt));const d=1/u;const p=(Math.exp((r-q)*dt)-d)/(u-d);// Stock prices at maturity\nconst prices=[];for(let i=0;i<=steps;i++){prices[i]=S*Math.pow(u,steps-i)*Math.pow(d,i);}// Option values at maturity\nconst values=prices.map(price=>Math.max(price-K,0));// Backward induction\nfor(let j=steps-1;j>=0;j--){for(let i=0;i<=j;i++){values[i]=Math.exp(-r*dt)*(p*values[i]+(1-p)*values[i+1]);}}return values[0];};const binomialPut=function(S,K,T,r,sigma){let q=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;let steps=arguments.length>6&&arguments[6]!==undefined?arguments[6]:50;const dt=T/steps;const u=Math.exp(sigma*Math.sqrt(dt));const d=1/u;const p=(Math.exp((r-q)*dt)-d)/(u-d);// Stock prices at maturity\nconst prices=[];for(let i=0;i<=steps;i++){prices[i]=S*Math.pow(u,steps-i)*Math.pow(d,i);}// Option values at maturity\nconst values=prices.map(price=>Math.max(K-price,0));// Backward induction\nfor(let j=steps-1;j>=0;j--){for(let i=0;i<=j;i++){values[i]=Math.exp(-r*dt)*(p*values[i]+(1-p)*values[i+1]);}}return values[0];};const getOptionPrice=(S,K,T,r,sigma,q,isCall)=>{switch(pricingModel){case'black76':const F=S*Math.exp((r-q)*T);return isCall?black76Call(F,K,T,r,sigma):black76Put(F,K,T,r,sigma);case'binomial':return isCall?binomialCall(S,K,T,r,sigma,q):binomialPut(S,K,T,r,sigma,q);case'blackscholes':default:return isCall?blackScholesCall(S,K,T,r,sigma,q):blackScholesPut(S,K,T,r,sigma,q);}};const handlePriceSlider=(newPrice,isCallSpread)=>{if(!result)return;const S=parseFloat(spotPrice);const K=parseFloat(strikePrice);const v1=parseFloat(iv1)/100;const r=parseFloat(riskFreeRate)/100;const q=parseFloat(dividend)/100;const d1=new Date(date1);const d2=new Date(date2);const now=new Date();const d1_16NY=new Date(d1);d1_16NY.setHours(22,0,0,0);const d2_16NY=new Date(d2);d2_16NY.setHours(22,0,0,0);const msPerDay=24*60*60*1000;const daysToExp1=(d1_16NY-now)/msPerDay;const daysToExp2=(d2_16NY-now)/msPerDay;const T1=daysToExp1/365;const T2=daysToExp2/365;const frontPrice=isCallSpread?getOptionPrice(S,K,T1,r,v1,q,true):getOptionPrice(S,K,T1,r,v1,q,false);// Target Back-Option Preis basierend auf neuer Spread-Preis\nconst targetBackPrice=newPrice+frontPrice;// Binäre Suche nach der IV2, die zu targetBackPrice führt\nlet v2Low=0.001;let v2High=3.0;let v2Mid=1.0;for(let iteration=0;iteration<100;iteration++){v2Mid=(v2Low+v2High)/2;const backPrice=isCallSpread?getOptionPrice(S,K,T2,r,v2Mid,q,true):getOptionPrice(S,K,T2,r,v2Mid,q,false);const diff=backPrice-targetBackPrice;if(Math.abs(diff)<0.00001)break;if(diff>0){v2High=v2Mid;}else{v2Low=v2Mid;}}// Mit dieser gefundenen IV2 berechne den echten FF\nconst numerator=T2*v2Mid*v2Mid-T1*v1*v1;const denominator=T2-T1;let newFF;if(numerator>=0&&denominator>0){const forwardVol=Math.sqrt(numerator/denominator);newFF=(v1/forwardVol-1)*100;}else{newFF=parseFloat(result.forwardFactor);}if(isCallSpread){setCallPriceSlider(newPrice);setAdjustedFFCall(newFF);}else{setPutPriceSlider(newPrice);setAdjustedFFPut(newFF);}};const calculateResults=()=>{try{const d1=new Date(date1);const d2=new Date(date2);if(d2<=d1){setResult({error:'Expiration 2 muss nach Expiration 1 liegen'});return;}// Berechne verbleibende Zeit mit Berücksichtigung der NY-Schließzeit (16:00 EST = 22:00 Berlin)\nconst now=new Date();const d1_16NY=new Date(d1);d1_16NY.setHours(22,0,0,0);// 16:00 EST = 22:00 Berlin (CET)\nconst d2_16NY=new Date(d2);d2_16NY.setHours(22,0,0,0);// 16:00 EST = 22:00 Berlin (CET)\n// Berechne verbleibende Tage mit Dezimalgenauigkeit (keine Rundung)\nconst msPerDay=24*60*60*1000;const daysToExp1=(d1_16NY-now)/msPerDay;const daysToExp2=(d2_16NY-now)/msPerDay;if(daysToExp1<=0||daysToExp2<=0){setResult({error:'Ablaufdatum liegt in der Vergangenheit'});return;}// Zeitberechnung in Jahren - KEINE Rundung!\nconst T1=daysToExp1/365;const T2=daysToExp2/365;const v1=parseFloat(iv1)/100;const v2=parseFloat(iv2)/100;const S=parseFloat(spotPrice);const K=parseFloat(strikePrice);const r=parseFloat(riskFreeRate)/100;const q=parseFloat(dividend)/100;if(v1<=0||v2<=0||S<=0||K<=0){setResult({error:'Bitte überprüfe deine Eingaben'});return;}const numerator=T2*v2*v2-T1*v1*v1;const denominator=T2-T1;if(numerator<0){setResult({error:'Ungültige IV Kombination - Forward Vol wäre imaginär'});return;}const forwardVol=Math.sqrt(numerator/denominator);const forwardVolPct=forwardVol*100;const forwardFactor=v1/forwardVol-1;const callT1=getOptionPrice(S,K,T1,r,v1,q,true);const callT2=getOptionPrice(S,K,T2,r,v2,q,true);const callCalendarSpread=callT2-callT1;const putT1=getOptionPrice(S,K,T1,r,v1,q,false);const putT2=getOptionPrice(S,K,T2,r,v2,q,false);const putCalendarSpread=putT2-putT1;// FF = 30%\nconst targetForwardFactor30=0.30;const requiredForwardVol30=v1/(1+targetForwardFactor30);const iv2Squared30=(requiredForwardVol30*requiredForwardVol30*(T2-T1)+T1*v1*v1)/T2;const requiredIV230=Math.sqrt(Math.max(0,iv2Squared30));const callT2At30=getOptionPrice(S,K,T2,r,requiredIV230,q,true);const maxCallCalendarPrice30=callT2At30-callT1;const putT2At30=getOptionPrice(S,K,T2,r,requiredIV230,q,false);const maxPutCalendarPrice30=putT2At30-putT1;// FF = 0%\nconst targetForwardFactor0=0;const requiredForwardVol0=v1/(1+targetForwardFactor0);const iv2Squared0=(requiredForwardVol0*requiredForwardVol0*(T2-T1)+T1*v1*v1)/T2;const requiredIV20=Math.sqrt(Math.max(0,iv2Squared0));const callT2At0=getOptionPrice(S,K,T2,r,requiredIV20,q,true);const callCalendarSpreadAt0=callT2At0-callT1;const putT2At0=getOptionPrice(S,K,T2,r,requiredIV20,q,false);const putCalendarSpreadAt0=putT2At0-putT1;const newResult={forwardVolPct:parseFloat(forwardVolPct).toFixed(2),forwardFactor:(parseFloat(forwardFactor)*100).toFixed(2),daysToExp1:parseFloat(daysToExp1).toFixed(2),daysToExp2:parseFloat(daysToExp2).toFixed(2),callT1:parseFloat(callT1).toFixed(2),callT2:parseFloat(callT2).toFixed(2),callCalendarSpread:parseFloat(callCalendarSpread).toFixed(2),putT1:parseFloat(putT1).toFixed(2),putT2:parseFloat(putT2).toFixed(2),putCalendarSpread:parseFloat(putCalendarSpread).toFixed(2),maxCallCalendarPrice30:Math.max(0,parseFloat(maxCallCalendarPrice30)).toFixed(2),maxPutCalendarPrice30:Math.max(0,parseFloat(maxPutCalendarPrice30)).toFixed(2),callCalendarSpreadAt0:parseFloat(callCalendarSpreadAt0).toFixed(2),putCalendarSpreadAt0:parseFloat(putCalendarSpreadAt0).toFixed(2),error:null,timestamp:new Date().toLocaleString('de-DE')};setResult(newResult);const historyEntry={ticker:ticker||'N/A',date:date1,ff:parseFloat(newResult.forwardFactor),callSpreadCurrent:newResult.callCalendarSpread,putSpreadCurrent:newResult.putCalendarSpread,callSpreadFF30:newResult.maxCallCalendarPrice30,putSpreadFF30:newResult.maxPutCalendarPrice30,callSpreadFF0:newResult.callCalendarSpreadAt0,putSpreadFF0:newResult.putCalendarSpreadAt0,timestamp:newResult.timestamp};setTradeHistory([historyEntry,...tradeHistory.slice(0,9)]);}catch(err){setResult({error:'Fehler bei der Berechnung: '+err.message});}};const renderCalendar=(value,onChange,show,setShow)=>{if(!show)return null;const today=new Date();let fridays=[];let currentDate=new Date(today);while(fridays.length<50){if(currentDate.getDay()===5){fridays.push(new Date(currentDate));}currentDate.setDate(currentDate.getDate()+1);}return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-50 mt-3 w-72 overflow-hidden rounded-lg border px-0 pb-3 backdrop-blur-2xl shadow-[0_30px_80px_-25px_rgba(15,23,42,0.6)] \".concat(darkMode?'border-slate-700 bg-slate-900/95 text-slate-100':'border-white/70 bg-white/95 text-slate-900'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 flex items-center justify-between bg-inherit px-4 py-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Next 50 Fridays\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShow(false),className:\"text-xs font-semibold transition \".concat(darkMode?'text-slate-400 hover:text-slate-200':'text-slate-500 hover:text-slate-700'),children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 px-3\",children:fridays.map(friday=>{const dateStr=friday.toISOString().split('T')[0];const isSelected=dateStr===value;const daysAway=Math.floor((friday-today)/(1000*60*60*24));return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{onChange(dateStr);setShow(false);},className:\"w-full rounded-xl px-3 py-2 text-left text-sm font-semibold transition \".concat(isSelected?'bg-gradient-to-r from-sky-500 to-indigo-500 text-white shadow-lg':darkMode?'bg-slate-900/70 text-slate-100 hover:bg-slate-800/80':'bg-white/80 text-slate-900 hover:bg-slate-100'),children:[friday.toLocaleDateString('de-DE'),\" (\",daysAway,\"d)\"]},dateStr);})})]});};const getFFColor=ff=>{const ffNum=parseFloat(ff);if(ffNum>=30){return darkMode?'border border-emerald-400/50 bg-emerald-500/15 text-emerald-200':'border border-emerald-300 bg-emerald-100 text-emerald-800';}if(ffNum>=16){return darkMode?'border border-amber-400/50 bg-amber-500/15 text-amber-200':'border border-amber-300 bg-amber-100 text-amber-800';}return darkMode?'border border-slate-600/70 bg-slate-900/70 text-slate-200':'border border-slate-200 bg-slate-50 text-slate-900';};const getLiquidityColor=(volume,openInterest)=>{if(!volume&&!openInterest)return darkMode?'text-slate-500':'text-slate-400';const vol=volume||0;const oi=openInterest||0;if(vol>1000||oi>5000)return'text-emerald-500';if(vol>100||oi>1000)return'text-amber-500';return'text-rose-500';};const getLiquidityLabel=(volume,openInterest)=>{if(!volume&&!openInterest)return'N/A';const vol=volume||0;const oi=openInterest||0;if(vol>1000||oi>5000)return'High';if(vol>100||oi>1000)return'Medium';return'Low';};const chartData=[{dte:0,iv:parseFloat(iv1).toFixed(2)},{dte:(parseFloat(result===null||result===void 0?void 0:result.daysToExp1)||7)/2,iv:(parseFloat(iv1)*0.7+parseFloat(iv2)*0.3).toFixed(2)},{dte:parseFloat(result===null||result===void 0?void 0:result.daysToExp2)||14,iv:parseFloat(iv2).toFixed(2)}];const exportCSV=()=>{if(!result||result.error)return;const csv=[['Calendar Spread Trade'],['Datum',new Date().toLocaleString('de-DE')],[],['Expiration 1',date1],['Expiration 2',date2],['IV Exp 1',iv1+'%'],['IV Exp 2',iv2+'%'],['Aktienkurs',spotPrice],['Strike',strikePrice],[],['Forward Volatility',result.forwardVolPct+'%'],['Forward Faktor',result.forwardFactor+'%'],['Call Calendar Spread',result.callCalendarSpread],['Put Calendar Spread',result.putCalendarSpread],['Max Call für FF +30%',result.maxCallCalendarPrice30],['Max Put für FF +30%',result.maxPutCalendarPrice30]].map(row=>row.join(',')).join('\\n');const blob=new Blob([csv],{type:'text/csv'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"calendar-trade-\".concat(new Date().toISOString().split('T')[0],\".csv\");a.click();};const backgroundClass=darkMode?'bg-gray-900 text-white':'bg-gray-50 text-gray-900';const cardClass=darkMode?'bg-gray-800 border border-gray-700':'bg-white border border-gray-200';const inputClass=darkMode?'bg-gray-700 border-gray-600 text-white':'bg-white border-gray-300 text-gray-900';const subtleTextClass=darkMode?'text-gray-400':'text-gray-600';const pricingModelLabel={blackscholes:'Black-Scholes',black76:'Black-76',binomial:'Binomial'}[pricingModel]||pricingModel;const dataSourceMeta=(()=>{switch(dataSource){case'real':return{label:'Real IV (Polygon.io)',className:darkMode?'border-emerald-500/40 bg-emerald-500/10 text-emerald-200':'border-emerald-300 bg-emerald-50 text-emerald-700'};case'demo':return{label:'Demo Dataset (SPY)',className:darkMode?'border-sky-500/40 bg-sky-500/10 text-sky-200':'border-sky-300 bg-sky-50 text-sky-700'};case'estimated':return{label:'Estimated IV (fallback)',className:darkMode?'border-amber-500/40 bg-amber-500/10 text-amber-200':'border-amber-300 bg-amber-50 text-amber-700'};default:return null;}})();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen p-6 \".concat(backgroundClass),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg p-6 mb-6\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Calendar Spread Calculator\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(subtleTextClass),children:\"Forward Volatility & Forward Factor Analyse\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowScanner(!showScanner),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(showScanner?'bg-blue-600 text-white':darkMode?'bg-gray-700 text-gray-300 hover:bg-gray-600':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"FF Scanner\"}),/*#__PURE__*/_jsxs(\"select\",{value:pricingModel,onChange:e=>setPricingModel(e.target.value),className:\"px-4 py-2 rounded-lg border \".concat(inputClass),children:[/*#__PURE__*/_jsx(\"option\",{value:\"blackscholes\",children:\"Black-Scholes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"black76\",children:\"Black-76\"}),/*#__PURE__*/_jsx(\"option\",{value:\"binomial\",children:\"Binomial\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"p-2 rounded-lg \".concat(darkMode?'bg-gray-700 text-yellow-400':'bg-gray-200 text-gray-700'),children:darkMode?/*#__PURE__*/_jsx(Sun,{size:20}):/*#__PURE__*/_jsx(Moon,{size:20})})]})]}),result&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" p-4 rounded-lg\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Forward Vol\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-500\",children:[result.forwardVolPct,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" p-4 rounded-lg\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Forward Factor\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-purple-500\",children:[result.forwardFactor,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" p-4 rounded-lg\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"DTE\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-500\",children:[result.daysToExp1,\"-\",result.daysToExp2]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" p-4 rounded-lg\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Model\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold\",children:pricingModelLabel})]})]})]}),showScanner&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg p-6 mb-6\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold\",children:\"Forward Factor Scanner\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm \".concat(subtleTextClass),children:\"Scan liquid US underlyings to discover calendar spreads with a Forward Factor above your threshold.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 rounded-lg border px-3 py-2 text-xs font-semibold \".concat(darkMode?'border-emerald-500/30 bg-emerald-500/10 text-emerald-200':'border-emerald-300 bg-emerald-50 text-emerald-700'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2705 Polygon.io Options IV\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:scanning?'Scanning…':'Ready'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex flex-col gap-4 md:flex-row md:items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Minimum Forward Factor (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:minFF,onChange:e=>setMinFF(parseFloat(e.target.value||0)),className:\"px-4 py-2 rounded-lg border \".concat(inputClass,\" mt-2\"),step:\"1\",min:\"0\",max:\"100\",disabled:scanning})]}),/*#__PURE__*/_jsx(\"button\",{onClick:runFFScanner,disabled:scanning,className:\"rounded-lg px-6 py-3 text-sm font-semibold transition-all \".concat(scanning?'cursor-not-allowed bg-slate-400/40 text-slate-200':'bg-gradient-to-r from-purple-500 via-indigo-500 to-sky-500 text-white shadow-lg shadow-purple-500/30 hover:shadow-purple-500/45'),children:scanning?\"Scanning\\u2026 \".concat(scanProgress.current,\"/\").concat(scanProgress.total):'Run Scanner'})]}),scanning&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-full overflow-hidden rounded-full \".concat(darkMode?'bg-slate-800':'bg-slate-200'),children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full rounded-full bg-gradient-to-r from-purple-500 via-indigo-500 to-sky-500 transition-all duration-300\",style:{width:scanProgress.total?\"\".concat(scanProgress.current/scanProgress.total*100,\"%\"):'0%'}})})}),scanLogs.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 rounded-lg border p-4 \".concat(darkMode?'border-slate-700 bg-slate-900/60':'border-slate-200 bg-white/80'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Scan Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 max-h-56 space-y-1 overflow-y-auto text-xs font-mono\",children:scanLogs.map((log,idx)=>/*#__PURE__*/_jsx(\"div\",{className:darkMode?'text-slate-200':'text-slate-700',children:log},idx))})]}),scanResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm \".concat(darkMode?'text-slate-200':'text-slate-700'),children:[/*#__PURE__*/_jsx(\"thead\",{className:darkMode?'bg-slate-900/70 text-slate-100':'bg-slate-100 text-slate-800',children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Strike\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"FF (%)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Forward Vol (%)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"IV 1 / IV 2\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Expirations\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"DTE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:scanResults.map((scan,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b \".concat(darkMode?'border-slate-800 hover:bg-slate-900/70':'border-slate-200 hover:bg-slate-50',\" transition\"),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 font-semibold\",children:scan.symbol}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3\",children:[\"$\",scan.price]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3\",children:[\"$\",scan.strike]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold \".concat(parseFloat(scan.ff)>=30?'text-emerald-500':'text-amber-500'),children:[scan.ff,\"%\"]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3\",children:[scan.fv,\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3\",children:[scan.iv1,\"% / \",scan.iv2,\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-xs\",children:[/*#__PURE__*/_jsx(\"div\",{children:scan.exp1}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2192 \",scan.exp2]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-xs\",children:[scan.dte1,\"d \\u2192 \",scan.dte2,\"d\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setTicker(scan.symbol);setSpotPrice(scan.price);setStrikePrice(scan.strike);setIv1(scan.iv1);setIv2(scan.iv2);setDate1(scan.exp1);setDate2(scan.exp2);setDataSource('real');setShowScanner(false);setTimeout(()=>calculateResults(),100);},className:\"rounded-xl px-4 py-2 text-xs font-semibold \".concat(darkMode?'bg-sky-600 text-white hover:bg-sky-500':'bg-sky-500 text-white hover:bg-sky-600'),children:\"Load\"})})]},idx))})]})}),!scanning&&scanResults.length===0&&scanProgress.total>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 rounded-lg border px-4 py-6 text-center text-sm \".concat(darkMode?'border-slate-700 text-slate-300':'border-slate-200 text-slate-600'),children:[\"No stocks found with FF \\u2265 \",minFF,\"%. Try lowering the threshold.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 grid grid-cols-1 gap-6 lg:grid-cols-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1 \".concat(cardClass,\" rounded-lg p-6 lg:p-8\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Parameter\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm \".concat(subtleTextClass),children:\"Live-Daten oder Demo laden und sofort durchstarten.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Polygon.io API Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:apiKey,onChange:e=>setApiKey(e.target.value),className:\"px-4 py-2 rounded-lg border \".concat(inputClass,\" mt-2\"),placeholder:\"Paste your Polygon.io API key\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://polygon.io/dashboard/signup\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"mt-2 inline-flex items-center text-xs font-semibold text-sky-400 hover:text-sky-300\",children:\"Get free API key \\u2192 (End-of-Day data)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Ticker Symbol\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:ticker,onChange:e=>handleTickerChange(e.target.value),onFocus:()=>handleTickerChange(ticker),className:\"px-4 py-2 rounded-lg border \".concat(inputClass),placeholder:\"e.g. SPY\"}),showTickerDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-40 mt-2 max-h-56 w-full overflow-y-auto rounded-lg border backdrop-blur-xl shadow-[0_30px_80px_-25px_rgba(15,23,42,0.6)] \".concat(darkMode?'border-slate-700 bg-slate-900/95 text-slate-100':'border-white/70 bg-white/95 text-slate-900'),children:filteredTickers.length>0?filteredTickers.map(stock=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>selectTicker(stock.symbol),className:\"flex w-full items-center justify-between px-4 py-2 text-sm transition \".concat(darkMode?'hover:bg-slate-800/80':'hover:bg-slate-100/80'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:stock.symbol}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs opacity-70\",children:stock.name})]},stock.symbol)):/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 text-sm opacity-70\",children:\"No matches found\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 sm:flex-row\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchOptionData(ticker),className:\"w-full bg-blue-600 text-white font-semibold py-3 rounded-lg hover:bg-blue-700 transition-colors sm:flex-1\",disabled:loading,children:loading?'Loading…':'Load Latest Market Data'}),/*#__PURE__*/_jsx(\"button\",{onClick:loadDemoData,className:\"sm:w-auto rounded-lg px-5 py-3 text-sm font-semibold transition-all duration-300 \".concat(darkMode?'bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/25':'bg-emerald-50 text-emerald-600 hover:bg-emerald-100'),children:\"Demo Data (SPY)\"})]}),loadError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-rose-400\",children:loadError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4\",children:[{label:'Expiration 1',value:date1,onClick:()=>{setShowCalendar1(true);setShowCalendar2(false);},calendar:renderCalendar(date1,setDate1,showCalendar1,setShowCalendar1)},{label:'Expiration 2',value:date2,onClick:()=>{setShowCalendar2(true);setShowCalendar1(false);},calendar:renderCalendar(date2,setDate2,showCalendar2,setShowCalendar2)}].map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:item.label}),/*#__PURE__*/_jsxs(\"button\",{onClick:item.onClick,className:\"mt-2 flex w-full items-center justify-between rounded-lg px-4 py-3 text-left text-sm font-semibold transition \".concat(darkMode?'bg-slate-900/70 text-slate-100 hover:border-sky-400/60 border border-slate-700':'bg-white/80 text-slate-900 hover:border-sky-500 border border-white/60'),children:[/*#__PURE__*/_jsx(\"span\",{children:new Date(item.value).toLocaleDateString('en-US')}),/*#__PURE__*/_jsx(Calendar,{className:\"h-5 w-5\"})]}),item.calendar]},idx))}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4\",children:[{label:'IV Exp 1 (%)',value:iv1,setter:setIv1},{label:'IV Exp 2 (%)',value:iv2,setter:setIv2},{label:'Stock Price',value:spotPrice,setter:setSpotPrice},{label:'Strike',value:strikePrice,setter:setStrikePrice},{label:'Risk-Free Rate (%)',value:riskFreeRate,setter:setRiskFreeRate},{label:'Dividend (%)',value:dividend,setter:setDividend}].map((field,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:field.label}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:field.value,onChange:e=>field.setter(e.target.value),className:baseInputClass,step:\"0.01\"})]},idx))}),/*#__PURE__*/_jsx(\"button\",{onClick:calculateResults,className:primaryButtonClass,children:\"Calculate\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3 \".concat(cardClass,\" rounded-lg p-6 lg:p-8\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:result&&/*#__PURE__*/_jsx(_Fragment,{children:result.error?/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-rose-500/40 p-6 \").concat(darkMode?'text-rose-200':'text-rose-600'),children:/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:result.error})}):/*#__PURE__*/_jsxs(_Fragment,{children:[dataSourceMeta&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 rounded-lg border px-4 py-2 text-xs font-semibold \".concat(dataSourceMeta.className),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Data Source\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:dataSourceMeta.label})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 lg:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-sky-400/35 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-wide text-sky-300\",children:\"Forward Volatility\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 text-3xl font-semibold\",children:[result.forwardVolPct,\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-xs \".concat(subtleTextClass),children:[result.daysToExp1,\"-\",result.daysToExp2,\" DTE\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-emerald-400/35 p-6 \").concat(getFFColor(result.forwardFactor)),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-wide opacity-80\",children:\"Forward Faktor\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 text-3xl font-semibold\",children:[result.forwardFactor,\"%\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs opacity-80\",children:parseFloat(result.forwardFactor)>=30?'✓ Excellent':parseFloat(result.forwardFactor)>=16?'✓ Good':'Below threshold'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-rose-500/35 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-rose-400\",children:\"Target Price for FF 30%\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border border-rose-400/40 bg-rose-500/10 p-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-wide text-rose-300\",children:\"Call Spread\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 text-4xl font-semibold text-rose-200\",children:[\"$\",result.maxCallCalendarPrice30]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs \".concat(subtleTextClass),children:\"Max Entry Price\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border border-rose-400/40 bg-rose-500/10 p-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-wide text-rose-300\",children:\"Put Spread\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 text-4xl font-semibold text-rose-200\",children:[\"$\",result.maxPutCalendarPrice30]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs \".concat(subtleTextClass),children:\"Max Entry Price\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-sky-500/35 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-sky-400\",children:\"Current Calendar Spreads\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border border-sky-400/30 bg-sky-500/10 p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-wide text-sky-200\",children:\"Call Spread\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Current Price\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-semibold text-sky-100\",children:[\"$\",result.callCalendarSpread]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs opacity-80\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"For FF 0%\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[\"$\",result.callCalendarSpreadAt0]})]})]}),(volumeCallT1!==null||volumeCallT2!==null||oiCallT1!==null||oiCallT2!==null)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"uppercase text-[10px] opacity-70\",children:\"T1 Flow\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(getLiquidityColor(volumeCallT1,oiCallT1)),children:volumeCallT1!==null?volumeCallT1.toLocaleString():'N/A'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] \".concat(darkMode?'text-slate-300':'text-slate-500'),children:[\"OI:\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(getLiquidityColor(volumeCallT1,oiCallT1)),children:oiCallT1!==null?oiCallT1.toLocaleString():'N/A'})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"uppercase text-[10px] opacity-70\",children:\"T2 Flow\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(getLiquidityColor(volumeCallT2,oiCallT2)),children:volumeCallT2!==null?volumeCallT2.toLocaleString():'N/A'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] \".concat(darkMode?'text-slate-300':'text-slate-500'),children:[\"OI:\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(getLiquidityColor(volumeCallT2,oiCallT2)),children:oiCallT2!==null?oiCallT2.toLocaleString():'N/A'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Liquidity\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(getLiquidityColor(volumeCallT1!==null&&volumeCallT1!==void 0?volumeCallT1:volumeCallT2,oiCallT1!==null&&oiCallT1!==void 0?oiCallT1:oiCallT2)),children:getLiquidityLabel(volumeCallT1!==null&&volumeCallT1!==void 0?volumeCallT1:volumeCallT2,oiCallT1!==null&&oiCallT1!==void 0?oiCallT1:oiCallT2)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border border-fuchsia-400/30 bg-fuchsia-500/10 p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-wide text-fuchsia-200\",children:\"Put Spread\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Current Price\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-semibold text-fuchsia-100\",children:[\"$\",result.putCalendarSpread]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs opacity-80\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"For FF 0%\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[\"$\",result.putCalendarSpreadAt0]})]})]}),(volumePutT1!==null||volumePutT2!==null||oiPutT1!==null||oiPutT2!==null)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"uppercase text-[10px] opacity-70\",children:\"T1 Flow\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(getLiquidityColor(volumePutT1,oiPutT1)),children:volumePutT1!==null?volumePutT1.toLocaleString():'N/A'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] \".concat(darkMode?'text-slate-300':'text-slate-500'),children:[\"OI:\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(getLiquidityColor(volumePutT1,oiPutT1)),children:oiPutT1!==null?oiPutT1.toLocaleString():'N/A'})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"uppercase text-[10px] opacity-70\",children:\"T2 Flow\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold \".concat(getLiquidityColor(volumePutT2,oiPutT2)),children:volumePutT2!==null?volumePutT2.toLocaleString():'N/A'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] \".concat(darkMode?'text-slate-300':'text-slate-500'),children:[\"OI:\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(getLiquidityColor(volumePutT2,oiPutT2)),children:oiPutT2!==null?oiPutT2.toLocaleString():'N/A'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Liquidity\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold \".concat(getLiquidityColor(volumePutT1!==null&&volumePutT1!==void 0?volumePutT1:volumePutT2,oiPutT1!==null&&oiPutT1!==void 0?oiPutT1:oiPutT2)),children:getLiquidityLabel(volumePutT1!==null&&volumePutT1!==void 0?volumePutT1:volumePutT2,oiPutT1!==null&&oiPutT1!==void 0?oiPutT1:oiPutT2)})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-slate-500/30 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold uppercase tracking-wide\",children:\"Term Structure Visualisation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 h-64 w-full\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(LineChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{stroke:darkMode?'#2f3344':'#dbeafe',strokeDasharray:\"3 6\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"dte\",stroke:darkMode?'#94a3b8':'#475569',tickLine:false,axisLine:false}),/*#__PURE__*/_jsx(YAxis,{stroke:darkMode?'#94a3b8':'#475569',tickLine:false,axisLine:false}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:darkMode?'rgba(15,23,42,0.9)':'rgba(255,255,255,0.9)',border:\"1px solid \".concat(darkMode?'rgba(148,163,184,0.2)':'rgba(59,130,246,0.2)'),borderRadius:16,color:darkMode?'#e2e8f0':'#0f172a'}}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"iv\",stroke:\"#38bdf8\",strokeWidth:3,dot:{r:4,fill:'#38bdf8'}})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 lg:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-sky-400/35 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold uppercase tracking-wide text-sky-200\",children:\"Call Calendar Spread\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-3 gap-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Front (T1)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"$\",result.callT1]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Back (T2)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"$\",result.callT2]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Spread\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold\",children:[\"$\",result.callCalendarSpread]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 rounded-lg border border-sky-400/30 bg-sky-500/10 p-3 text-xs font-semibold\",children:[\"Max f\\xFCr FF +30%: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"$\",result.maxCallCalendarPrice30]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Preis-Simulator\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:parseFloat(result.callCalendarSpread)*4,step:\"0.01\",defaultValue:result.callCalendarSpread,onChange:e=>handlePriceSlider(parseFloat(e.target.value),true),className:\"h-2 w-full cursor-pointer appearance-none rounded-full bg-gradient-to-r from-sky-400 via-indigo-400 to-purple-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",parseFloat(result.maxCallCalendarPrice30).toFixed(2),\" (FF 30%)\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"$\",callPriceSlider!==null?callPriceSlider.toFixed(2):result.callCalendarSpread]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",(parseFloat(result.callCalendarSpread)*4).toFixed(2),\" (max)\"]})]}),callPriceSlider!==null&&adjustedFFCall!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-3 text-center text-sm font-bold \".concat(adjustedFFCall>=30?'border-emerald-400/60 bg-emerald-500/15 text-emerald-200':adjustedFFCall>=16?'border-amber-400/60 bg-amber-500/15 text-amber-200':'border-slate-500/50 bg-slate-500/10'),children:[\"Angepasster FF: \",adjustedFFCall.toFixed(2),\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-fuchsia-400/35 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold uppercase tracking-wide text-fuchsia-200\",children:\"Put Calendar Spread\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-3 gap-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Front (T1)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"$\",result.putT1]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Back (T2)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"$\",result.putT2]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(subtleTextClass),children:\"Spread\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold\",children:[\"$\",result.putCalendarSpread]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 rounded-lg border border-fuchsia-400/30 bg-fuchsia-500/10 p-3 text-xs font-semibold\",children:[\"Max f\\xFCr FF +30%: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"$\",result.maxPutCalendarPrice30]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold uppercase tracking-wide\",children:\"Preis-Simulator\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:parseFloat(result.putCalendarSpread)*4,step:\"0.01\",defaultValue:result.putCalendarSpread,onChange:e=>handlePriceSlider(parseFloat(e.target.value),false),className:\"h-2 w-full cursor-pointer appearance-none rounded-full bg-gradient-to-r from-pink-400 via-fuchsia-400 to-purple-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",parseFloat(result.maxPutCalendarPrice30).toFixed(2),\" (FF 30%)\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[\"$\",putPriceSlider!==null?putPriceSlider.toFixed(2):result.putCalendarSpread]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",(parseFloat(result.putCalendarSpread)*4).toFixed(2),\" (max)\"]})]}),putPriceSlider!==null&&adjustedFFPut!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-3 text-center text-sm font-bold \".concat(adjustedFFPut>=30?'border-emerald-400/60 bg-emerald-500/15 text-emerald-200':adjustedFFPut>=16?'border-amber-400/60 bg-amber-500/15 text-amber-200':'border-slate-500/50 bg-slate-500/10'),children:[\"Angepasster FF: \",adjustedFFPut.toFixed(2),\"%\"]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportCSV,className:\"flex w-full items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-emerald-500 via-teal-500 to-sky-500 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition-all duration-300 hover:shadow-emerald-500/40\",children:[/*#__PURE__*/_jsx(Download,{size:20}),\" Ergebnis als CSV exportieren\"]}),tradeHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(cardClass,\" rounded-lg border border-slate-500/30 p-6\"),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold uppercase tracking-wide\",children:\"Trade History (letzte 10)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 max-h-96 space-y-3 overflow-y-auto pr-2 text-sm\",children:tradeHistory.map((trade,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg border p-4 transition \".concat(parseFloat(trade.ff)>=30?darkMode?'border-emerald-400/40 bg-emerald-500/15':'border-emerald-200 bg-emerald-50':parseFloat(trade.ff)>=16?darkMode?'border-amber-400/40 bg-amber-500/15':'border-amber-200 bg-amber-50':darkMode?'border-slate-600 bg-slate-900/70':'border-slate-200 bg-white/80'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-semibold\",children:[trade.ticker,\" \\xB7 \",trade.date,\" \\xB7 FF \",trade.ff.toFixed(2),\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 space-y-1 text-xs \".concat(subtleTextClass),children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Aktuell: Call $\",parseFloat(trade.callSpreadCurrent).toFixed(4),\" | Put $\",parseFloat(trade.putSpreadCurrent).toFixed(4)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"@ FF 30%: Call $\",parseFloat(trade.callSpreadFF30).toFixed(4),\" | Put $\",parseFloat(trade.putSpreadFF30).toFixed(4)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"@ FF 0%: Call $\",parseFloat(trade.callSpreadFF0).toFixed(4),\" | Put $\",parseFloat(trade.putSpreadFF0).toFixed(4)]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs \".concat(subtleTextClass),children:trade.timestamp})]},idx))})]})]})})})})]})]}),/*#__PURE__*/_jsx(Analytics,{})]});}","map":{"version":3,"names":["React","useState","Calendar","Download","Moon","Sun","Analytics","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ForwardVolCalculator","date1","setDate1","date2","setDate2","iv1","setIv1","iv2","setIv2","spotPrice","setSpotPrice","strikePrice","setStrikePrice","riskFreeRate","setRiskFreeRate","dividend","setDividend","showCalendar1","setShowCalendar1","showCalendar2","setShowCalendar2","result","setResult","darkMode","setDarkMode","tradeHistory","setTradeHistory","callPriceSlider","setCallPriceSlider","putPriceSlider","setPutPriceSlider","adjustedFFCall","setAdjustedFFCall","adjustedFFPut","setAdjustedFFPut","pricingModel","setPricingModel","ticker","setTicker","loading","setLoading","loadError","setLoadError","apiKey","setApiKey","localStorage","getItem","showTickerDropdown","setShowTickerDropdown","filteredTickers","setFilteredTickers","volumeCallT1","setVolumeCallT1","volumeCallT2","setVolumeCallT2","volumePutT1","setVolumePutT1","volumePutT2","setVolumePutT2","oiCallT1","setOiCallT1","oiCallT2","setOiCallT2","oiPutT1","setOiPutT1","oiPutT2","setOiPutT2","showScanner","setShowScanner","scanResults","setScanResults","scanning","setScanning","minFF","setMinFF","scanProgress","setScanProgress","current","total","scanLogs","setScanLogs","dataSource","setDataSource","popularStocks","symbol","name","handleTickerChange","value","upper","toUpperCase","length","matches","filter","stock","startsWith","includes","slice","runFFScanner","trim","stocksToScan","results","logs","today","Date","allFridays","currentDate","getDay","push","setDate","getDate","console","log","now","dayOfWeek","getUTCDay","isWeekend","concat","i","quoteUrl","quoteResponse","fetch","ok","quoteData","json","currentPrice","c","strike","Math","round","optionsUrl","optionsResponse","error","optionsData","callOptions","opt","details","contract_type","implied_volatility","abs","strike_price","optionsByExpiration","forEach","expDate","expiration_date","expirationDates","Object","keys","sort","bestFF","Infinity","bestCombo","a","b","exp1","exp2","exp1Opts","x","y","exp2Opts","iv1Data","iv2Data","exp1DateObj","exp2DateObj","msPerDay","daysToExp1","daysToExp2","T1","T2","v1","v2","numerator","denominator","forwardVol","sqrt","forwardFactor","dte1","dte2","fv","ff","toFixed","price","Promise","resolve","setTimeout","parseFloat","finalMsg","selectTicker","loadDemoData","calculateResults","fetchOptionData","tickerSymbol","setItem","Error","status","fridays","toISOString","split","roundedStrike","exp1Date","exp2Date","gotRealIV1","gotRealIV2","chain1Url","chain1Response","chain1Data","atmCall","_opt$details","_atmCall$details","_atmCall$details2","_atmCall$day","undefined","iv1Value","day","volume","open_interest","errorText","text","chain2Url","chain2Response","chain2Data","atmCall2","_opt$details2","_atmCall2$details","_atmCall2$details2","_atmCall2$day","iv2Value","atmPut2","_opt$details3","_opt$details4","_atmPut2$day","chain1PutUrl","chain1PutResponse","chain1PutData","atmPut1","_opt$details5","_atmPut1$day","optError","message","getNextFridays","normDist","a1","a2","a3","a4","a5","p","sign","t","exp","blackScholesCall","S","K","T","r","sigma","q","arguments","max","sqrtT","d1","d2","callPrice","blackScholesPut","putPrice","black76Call","F","black76Put","binomialCall","steps","dt","u","d","prices","pow","values","map","j","binomialPut","getOptionPrice","isCall","handlePriceSlider","newPrice","isCallSpread","d1_16NY","setHours","d2_16NY","frontPrice","targetBackPrice","v2Low","v2High","v2Mid","iteration","backPrice","diff","newFF","forwardVolPct","callT1","callT2","callCalendarSpread","putT1","putT2","putCalendarSpread","targetForwardFactor30","requiredForwardVol30","iv2Squared30","requiredIV230","callT2At30","maxCallCalendarPrice30","putT2At30","maxPutCalendarPrice30","targetForwardFactor0","requiredForwardVol0","iv2Squared0","requiredIV20","callT2At0","callCalendarSpreadAt0","putT2At0","putCalendarSpreadAt0","newResult","timestamp","toLocaleString","historyEntry","date","callSpreadCurrent","putSpreadCurrent","callSpreadFF30","putSpreadFF30","callSpreadFF0","putSpreadFF0","err","renderCalendar","onChange","show","setShow","className","children","onClick","friday","dateStr","isSelected","daysAway","floor","toLocaleDateString","getFFColor","ffNum","getLiquidityColor","openInterest","vol","oi","getLiquidityLabel","chartData","dte","iv","exportCSV","csv","row","join","blob","Blob","type","url","URL","createObjectURL","document","createElement","href","download","click","backgroundClass","cardClass","inputClass","subtleTextClass","pricingModelLabel","blackscholes","black76","binomial","dataSourceMeta","label","e","target","size","step","min","disabled","style","width","idx","scan","placeholder","rel","onFocus","calendar","item","setter","field","baseInputClass","primaryButtonClass","height","data","stroke","strokeDasharray","dataKey","tickLine","axisLine","contentStyle","backgroundColor","border","borderRadius","color","strokeWidth","dot","fill","defaultValue","trade"],"sources":["/Users/nils/calendar-spread-app/calendar-spread-app/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Calendar, Download, Moon, Sun } from 'lucide-react';\nimport { Analytics } from '@vercel/analytics/react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\n\nexport default function ForwardVolCalculator() {\n  const [date1, setDate1] = useState('2025-10-24');\n  const [date2, setDate2] = useState('2025-10-31');\n  const [iv1, setIv1] = useState('50');\n  const [iv2, setIv2] = useState('40');\n  const [spotPrice, setSpotPrice] = useState('100');\n  const [strikePrice, setStrikePrice] = useState('100');\n  const [riskFreeRate, setRiskFreeRate] = useState('4');\n  const [dividend, setDividend] = useState('0');\n  const [showCalendar1, setShowCalendar1] = useState(false);\n  const [showCalendar2, setShowCalendar2] = useState(false);\n  const [result, setResult] = useState(null);\n  const [darkMode, setDarkMode] = useState(false);\n  const [tradeHistory, setTradeHistory] = useState([]);\n  const [callPriceSlider, setCallPriceSlider] = useState(null);\n  const [putPriceSlider, setPutPriceSlider] = useState(null);\n  const [adjustedFFCall, setAdjustedFFCall] = useState(null);\n  const [adjustedFFPut, setAdjustedFFPut] = useState(null);\n  const [pricingModel, setPricingModel] = useState('blackscholes');\n  const [ticker, setTicker] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [loadError, setLoadError] = useState(null);\n  const [apiKey, setApiKey] = useState(localStorage.getItem('polygonKey') || '');\n  const [showTickerDropdown, setShowTickerDropdown] = useState(false);\n  const [filteredTickers, setFilteredTickers] = useState([]);\n  const [volumeCallT1, setVolumeCallT1] = useState(null);\n  const [volumeCallT2, setVolumeCallT2] = useState(null);\n  const [volumePutT1, setVolumePutT1] = useState(null);\n  const [volumePutT2, setVolumePutT2] = useState(null);\n  const [oiCallT1, setOiCallT1] = useState(null);\n  const [oiCallT2, setOiCallT2] = useState(null);\n  const [oiPutT1, setOiPutT1] = useState(null);\n  const [oiPutT2, setOiPutT2] = useState(null);\n  const [showScanner, setShowScanner] = useState(false);\n  const [scanResults, setScanResults] = useState([]);\n  const [scanning, setScanning] = useState(false);\n  const [minFF, setMinFF] = useState(30);\n  const [scanProgress, setScanProgress] = useState({ current: 0, total: 0 });\n  const [scanLogs, setScanLogs] = useState([]);\n  const [dataSource, setDataSource] = useState(null);\n\n  // Popular US stocks for autocomplete\n  const popularStocks = [\n    { symbol: 'AAPL', name: 'Apple Inc.' },\n    { symbol: 'MSFT', name: 'Microsoft Corporation' },\n    { symbol: 'GOOGL', name: 'Alphabet Inc.' },\n    { symbol: 'AMZN', name: 'Amazon.com Inc.' },\n    { symbol: 'NVDA', name: 'NVIDIA Corporation' },\n    { symbol: 'META', name: 'Meta Platforms Inc.' },\n    { symbol: 'TSLA', name: 'Tesla Inc.' },\n    { symbol: 'BRK.B', name: 'Berkshire Hathaway Inc.' },\n    { symbol: 'V', name: 'Visa Inc.' },\n    { symbol: 'JPM', name: 'JPMorgan Chase & Co.' },\n    { symbol: 'WMT', name: 'Walmart Inc.' },\n    { symbol: 'JNJ', name: 'Johnson & Johnson' },\n    { symbol: 'MA', name: 'Mastercard Inc.' },\n    { symbol: 'PG', name: 'Procter & Gamble Co.' },\n    { symbol: 'UNH', name: 'UnitedHealth Group Inc.' },\n    { symbol: 'HD', name: 'Home Depot Inc.' },\n    { symbol: 'DIS', name: 'Walt Disney Co.' },\n    { symbol: 'BAC', name: 'Bank of America Corp.' },\n    { symbol: 'ADBE', name: 'Adobe Inc.' },\n    { symbol: 'CRM', name: 'Salesforce Inc.' },\n    { symbol: 'NFLX', name: 'Netflix Inc.' },\n    { symbol: 'CMCSA', name: 'Comcast Corporation' },\n    { symbol: 'XOM', name: 'Exxon Mobil Corporation' },\n    { symbol: 'COST', name: 'Costco Wholesale Corp.' },\n    { symbol: 'PEP', name: 'PepsiCo Inc.' },\n    { symbol: 'TMO', name: 'Thermo Fisher Scientific Inc.' },\n    { symbol: 'ABT', name: 'Abbott Laboratories' },\n    { symbol: 'NKE', name: 'Nike Inc.' },\n    { symbol: 'CSCO', name: 'Cisco Systems Inc.' },\n    { symbol: 'ORCL', name: 'Oracle Corporation' },\n    { symbol: 'AMD', name: 'Advanced Micro Devices Inc.' },\n    { symbol: 'INTC', name: 'Intel Corporation' },\n    { symbol: 'QCOM', name: 'Qualcomm Inc.' },\n    { symbol: 'TXN', name: 'Texas Instruments Inc.' },\n    { symbol: 'AVGO', name: 'Broadcom Inc.' },\n    { symbol: 'CVX', name: 'Chevron Corporation' },\n    { symbol: 'KO', name: 'Coca-Cola Co.' },\n    { symbol: 'MCD', name: 'McDonald\\'s Corporation' },\n    { symbol: 'PYPL', name: 'PayPal Holdings Inc.' },\n    { symbol: 'UBER', name: 'Uber Technologies Inc.' },\n    { symbol: 'BA', name: 'Boeing Co.' },\n    { symbol: 'CAT', name: 'Caterpillar Inc.' },\n    { symbol: 'GE', name: 'General Electric Co.' },\n    { symbol: 'F', name: 'Ford Motor Co.' },\n    { symbol: 'GM', name: 'General Motors Co.' },\n    { symbol: 'SBUX', name: 'Starbucks Corporation' },\n    { symbol: 'PLTR', name: 'Palantir Technologies Inc.' },\n    { symbol: 'COIN', name: 'Coinbase Global Inc.' },\n    { symbol: 'SQ', name: 'Block Inc.' },\n    { symbol: 'SNOW', name: 'Snowflake Inc.' },\n    { symbol: 'SPY', name: 'SPDR S&P 500 ETF Trust' },\n    { symbol: 'QQQ', name: 'Invesco QQQ Trust' },\n    { symbol: 'IWM', name: 'iShares Russell 2000 ETF' },\n    { symbol: 'DIA', name: 'SPDR Dow Jones Industrial Average ETF' },\n    { symbol: 'VTI', name: 'Vanguard Total Stock Market ETF' },\n    { symbol: 'VOO', name: 'Vanguard S&P 500 ETF' },\n    { symbol: 'GLD', name: 'SPDR Gold Trust' },\n    { symbol: 'SLV', name: 'iShares Silver Trust' },\n    { symbol: 'TLT', name: 'iShares 20+ Year Treasury Bond ETF' },\n    { symbol: 'XLE', name: 'Energy Select Sector SPDR Fund' },\n    { symbol: 'XLF', name: 'Financial Select Sector SPDR Fund' },\n    { symbol: 'XLK', name: 'Technology Select Sector SPDR Fund' },\n  ];\n\n  const handleTickerChange = (value) => {\n    const upper = value.toUpperCase();\n    setTicker(upper);\n\n    if (upper.length > 0) {\n      const matches = popularStocks.filter(stock =>\n        stock.symbol.startsWith(upper) ||\n        stock.name.toUpperCase().includes(upper)\n      ).slice(0, 10);\n      setFilteredTickers(matches);\n      setShowTickerDropdown(matches.length > 0);\n    } else {\n      setFilteredTickers([]);\n      setShowTickerDropdown(false);\n    }\n  };\n\n  const runFFScanner = async () => {\n    if (!apiKey || apiKey.trim() === '') {\n      setLoadError('Please enter your Polygon.io API key to use the scanner');\n      return;\n    }\n\n    setScanning(true);\n    setScanResults([]);\n    setScanLogs([]);\n    setLoadError(null);\n\n    const stocksToScan = [\n      'SPY', 'QQQ', 'IWM', 'AAPL', 'MSFT', 'GOOGL', 'AMZN', 'NVDA',\n      'META', 'TSLA', 'AMD', 'NFLX', 'COIN', 'PLTR', 'GLD', 'TLT'\n    ];\n\n    const results = [];\n    const logs = [];\n    const today = new Date();\n\n    const allFridays = [];\n    let currentDate = new Date(today);\n    while (allFridays.length < 8) {\n      if (currentDate.getDay() === 5 && currentDate > today) {\n        allFridays.push(new Date(currentDate));\n      }\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n\n    console.log('Scanner: Using real IV data for all expiration combinations');\n\n    const now = new Date();\n    const dayOfWeek = now.getUTCDay();\n    const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;\n\n    logs.push(`🔍 Scanning ${stocksToScan.length} stocks for FF ≥ ${minFF}%`);\n    logs.push(`📅 Testing all expiration combinations (next ${allFridays.length} weeks)`);\n    logs.push(isWeekend\n      ? '⏰ Market closed (Weekend). Using last available IV data from Friday.'\n      : '⏰ Using most recent IV data (15-min delayed)'\n    );\n\n    setScanLogs([...logs]);\n    setScanProgress({ current: 0, total: stocksToScan.length });\n\n    for (let i = 0; i < stocksToScan.length; i++) {\n      const symbol = stocksToScan[i];\n      setScanProgress({ current: i + 1, total: stocksToScan.length });\n\n      try {\n        const quoteUrl = `https://api.polygon.io/v2/aggs/ticker/${symbol}/prev?adjusted=true&apiKey=${apiKey}`;\n        const quoteResponse = await fetch(quoteUrl);\n        if (!quoteResponse.ok) continue;\n\n        const quoteData = await quoteResponse.json();\n        if (!quoteData.results || quoteData.results.length === 0) continue;\n\n        const currentPrice = quoteData.results[0].c;\n        const strike = Math.round(currentPrice / 5) * 5;\n\n        const optionsUrl = `https://api.polygon.io/v3/snapshot/options/${symbol}?apiKey=${apiKey}`;\n        const optionsResponse = await fetch(optionsUrl);\n        if (!optionsResponse.ok) {\n          console.error(`${symbol}: Failed to fetch options data`);\n          continue;\n        }\n\n        const optionsData = await optionsResponse.json();\n        if (!optionsData.results || optionsData.results.length === 0) {\n          logs.push(`❌ ${symbol}: No options data from API`);\n          setScanLogs([...logs]);\n          continue;\n        }\n\n        const callOptions = optionsData.results.filter(opt =>\n          opt.details &&\n          opt.details.contract_type === 'call' &&\n          opt.implied_volatility &&\n          opt.implied_volatility > 0 &&\n          Math.abs(opt.details.strike_price - strike) < 20\n        );\n\n        if (callOptions.length === 0) {\n          logs.push(`❌ ${symbol}: No call options with IV data`);\n          setScanLogs([...logs]);\n          continue;\n        }\n\n        const optionsByExpiration = {};\n        callOptions.forEach(opt => {\n          const expDate = opt.details.expiration_date;\n          if (!optionsByExpiration[expDate]) {\n            optionsByExpiration[expDate] = [];\n          }\n          optionsByExpiration[expDate].push(opt);\n        });\n\n        const expirationDates = Object.keys(optionsByExpiration).sort();\n        if (expirationDates.length < 2) {\n          logs.push(`❌ ${symbol}: Need at least 2 expirations (found ${expirationDates.length})`);\n          setScanLogs([...logs]);\n          continue;\n        }\n\n        let bestFF = -Infinity;\n        let bestCombo = null;\n\n        for (let a = 0; a < expirationDates.length - 1; a++) {\n          for (let b = a + 1; b < expirationDates.length; b++) {\n            const exp1 = expirationDates[a];\n            const exp2 = expirationDates[b];\n\n            const exp1Opts = optionsByExpiration[exp1].sort((x, y) =>\n              Math.abs(x.details.strike_price - strike) - Math.abs(y.details.strike_price - strike)\n            );\n            const exp2Opts = optionsByExpiration[exp2].sort((x, y) =>\n              Math.abs(x.details.strike_price - strike) - Math.abs(y.details.strike_price - strike)\n            );\n\n            const iv1Data = exp1Opts[0].implied_volatility;\n            const iv2Data = exp2Opts[0].implied_volatility;\n\n            if (!iv1Data || !iv2Data) continue;\n\n            const iv1 = iv1Data;\n            const iv2 = iv2Data;\n\n            const exp1DateObj = new Date(exp1);\n            const exp2DateObj = new Date(exp2);\n            const msPerDay = 24 * 60 * 60 * 1000;\n            const daysToExp1 = (exp1DateObj - today) / msPerDay;\n            const daysToExp2 = (exp2DateObj - today) / msPerDay;\n\n            if (daysToExp1 <= 0 || daysToExp2 <= 0 || daysToExp2 <= daysToExp1) continue;\n\n            const T1 = daysToExp1 / 365;\n            const T2 = daysToExp2 / 365;\n            const v1 = iv1;\n            const v2 = iv2;\n\n            const numerator = (T2 * v2 * v2) - (T1 * v1 * v1);\n            const denominator = T2 - T1;\n\n            if (numerator < 0 || denominator <= 0) continue;\n\n            const forwardVol = Math.sqrt(numerator / denominator);\n            const forwardFactor = ((v1 / forwardVol) - 1) * 100;\n\n            if (forwardFactor > bestFF) {\n              bestFF = forwardFactor;\n              bestCombo = {\n                exp1,\n                exp2,\n                iv1: v1 * 100,\n                iv2: v2 * 100,\n                dte1: daysToExp1,\n                dte2: daysToExp2,\n                fv: forwardVol * 100,\n                ff: forwardFactor,\n                strike: exp1Opts[0].details.strike_price\n              };\n            }\n          }\n        }\n\n        if (!bestCombo) {\n          logs.push(`❌ ${symbol}: No valid combinations found`);\n          setScanLogs([...logs]);\n          continue;\n        }\n\n        console.log(`${symbol}: Best FF=${bestCombo.ff.toFixed(2)}% (${bestCombo.exp1} → ${bestCombo.exp2})`);\n\n        if (bestCombo.ff >= minFF) {\n          logs.push(`✅ ${symbol}: FF=${bestCombo.ff.toFixed(2)}% (${bestCombo.exp1}→${bestCombo.exp2})`);\n          setScanLogs([...logs]);\n\n          results.push({\n            symbol,\n            price: currentPrice.toFixed(2),\n            strike: bestCombo.strike.toFixed(0),\n            ff: bestCombo.ff.toFixed(2),\n            fv: bestCombo.fv.toFixed(2),\n            iv1: bestCombo.iv1.toFixed(1),\n            iv2: bestCombo.iv2.toFixed(1),\n            dte1: bestCombo.dte1.toFixed(1),\n            dte2: bestCombo.dte2.toFixed(1),\n            exp1: bestCombo.exp1,\n            exp2: bestCombo.exp2\n          });\n        } else {\n          logs.push(`⚪ ${symbol}: Best FF=${bestCombo.ff.toFixed(2)}% (below threshold)`);\n          setScanLogs([...logs]);\n        }\n\n        await new Promise(resolve => setTimeout(resolve, 100));\n      } catch (error) {\n        console.error(`Error scanning ${symbol}:`, error);\n      }\n    }\n\n    results.sort((a, b) => parseFloat(b.ff) - parseFloat(a.ff));\n\n    const finalMsg = `🎯 Scan complete: Found ${results.length} stocks with FF ≥ ${minFF}%`;\n    console.log(finalMsg);\n    logs.push(finalMsg);\n    setScanLogs([...logs]);\n\n    setScanResults(results);\n    setScanning(false);\n    setScanProgress({ current: 0, total: 0 });\n\n    if (results.length === 0) {\n      setLoadError(`No stocks found with FF ≥ ${minFF}%. Try lowering the threshold to 20% or 15%.`);\n    }\n  };\n\n  const selectTicker = (symbol) => {\n    setTicker(symbol);\n    setShowTickerDropdown(false);\n    setFilteredTickers([]);\n  };\n\n  const loadDemoData = () => {\n    // Demo data for SPY\n    setTicker('SPY');\n    setSpotPrice('580.25');\n    setStrikePrice('580');\n    setDate1('2025-10-24');\n    setDate2('2025-10-31');\n    setIv1('12.5');\n    setIv2('11.8');\n    setRiskFreeRate('4.5');\n    setDividend('1.2');\n    setVolumeCallT1(45230);\n    setVolumeCallT2(12450);\n    setVolumePutT1(38920);\n    setVolumePutT2(9870);\n    setOiCallT1(128500);\n    setOiCallT2(67300);\n    setOiPutT1(145600);\n    setOiPutT2(52100);\n    setDataSource('demo');\n\n    // Auto-calculate\n    setTimeout(() => calculateResults(), 100);\n  };\n\n  const fetchOptionData = async (tickerSymbol) => {\n    if (!tickerSymbol || tickerSymbol.trim() === '') {\n      setLoadError('Please enter a ticker symbol');\n      return;\n    }\n\n    if (!apiKey || apiKey.trim() === '') {\n      setLoadError('Please enter your Polygon.io API key');\n      return;\n    }\n\n    setLoading(true);\n    setLoadError(null);\n    setVolumeCallT1(null);\n    setVolumeCallT2(null);\n    setVolumePutT1(null);\n    setVolumePutT2(null);\n    setOiCallT1(null);\n    setOiCallT2(null);\n    setOiPutT1(null);\n    setOiPutT2(null);\n    setDataSource(null);\n\n    try {\n      const symbol = tickerSymbol.toUpperCase().trim();\n      console.log('Fetching data for:', symbol);\n\n      localStorage.setItem('polygonKey', apiKey);\n\n      const today = new Date();\n      const quoteUrl = `https://api.polygon.io/v2/aggs/ticker/${symbol}/prev?adjusted=true&apiKey=${apiKey}`;\n      console.log('Fetching quote from Polygon.io...');\n\n      const quoteResponse = await fetch(quoteUrl);\n      if (!quoteResponse.ok) {\n        throw new Error(`API Error (${quoteResponse.status}). Check your API key.`);\n      }\n\n      const quoteData = await quoteResponse.json();\n      console.log('Quote data:', quoteData);\n\n      if (quoteData.status === 'ERROR') {\n        throw new Error(quoteData.error || 'Invalid ticker symbol');\n      }\n\n      if (!quoteData.results || quoteData.results.length === 0) {\n        throw new Error('No price data available for this ticker');\n      }\n\n      const result = quoteData.results[0];\n      const currentPrice = result.c;\n\n      if (!currentPrice || currentPrice <= 0) {\n        throw new Error('No valid price data available');\n      }\n\n      setSpotPrice(currentPrice.toFixed(2));\n\n      const fridays = [];\n      let currentDate = new Date(today);\n\n      while (fridays.length < 2) {\n        if (currentDate.getDay() === 5 && currentDate > today) {\n          fridays.push(new Date(currentDate));\n        }\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n\n      setDate1(fridays[0].toISOString().split('T')[0]);\n      setDate2(fridays[1].toISOString().split('T')[0]);\n\n      const roundedStrike = Math.round(currentPrice / 5) * 5;\n      setStrikePrice(roundedStrike.toFixed(2));\n\n      try {\n        const exp1Date = fridays[0].toISOString().split('T')[0];\n        const exp2Date = fridays[1].toISOString().split('T')[0];\n\n        console.log('📊 Fetching options data for expirations:', exp1Date, exp2Date);\n        console.log('💡 Using Option Chain Snapshot API with market data');\n\n        // Track if we got real IV data\n        let gotRealIV1 = false;\n        let gotRealIV2 = false;\n\n        // ✅ USE OPTION CHAIN SNAPSHOT API - This returns IV, Volume, OI directly!\n        // API: /v3/snapshot/options/{underlying_ticker}\n        // Filter by expiration_date and contract_type to get ATM options\n\n        // Fetch T1 options using Option Chain Snapshot API\n        const chain1Url = `https://api.polygon.io/v3/snapshot/options/${symbol}?expiration_date.gte=${exp1Date}&expiration_date.lte=${exp1Date}&contract_type=call&limit=250&apiKey=${apiKey}`;\n        console.log('🔍 Fetching T1 chain snapshot:', chain1Url);\n\n        const chain1Response = await fetch(chain1Url);\n        if (chain1Response.ok) {\n          const chain1Data = await chain1Response.json();\n          console.log('📦 T1 Chain Snapshot Response:', chain1Data);\n\n          if (chain1Data.status === 'OK' && chain1Data.results && chain1Data.results.length > 0) {\n            // Find ATM call option (closest strike to current price)\n            const atmCall = chain1Data.results\n              .filter(opt => opt.details?.strike_price && Math.abs(opt.details.strike_price - roundedStrike) < 20)\n              .sort((a, b) => Math.abs(a.details.strike_price - roundedStrike) - Math.abs(b.details.strike_price - roundedStrike))[0];\n\n            if (atmCall) {\n              console.log('✅ Found T1 ATM Call:', atmCall.details?.ticker, 'Strike:', atmCall.details?.strike_price);\n\n              // Extract IV from snapshot data\n              if (atmCall.implied_volatility !== undefined && atmCall.implied_volatility > 0) {\n                const iv1Value = (atmCall.implied_volatility * 100).toFixed(2);\n                setIv1(iv1Value);\n                gotRealIV1 = true;\n                console.log(`✅ T1 IV: ${iv1Value}%`);\n              } else {\n                console.log('⚠️ T1 IV not available:', atmCall.implied_volatility);\n              }\n\n              // Extract Volume\n              if (atmCall.day?.volume !== undefined) {\n                setVolumeCallT1(atmCall.day.volume);\n                console.log(`✅ T1 Call Volume: ${atmCall.day.volume}`);\n              }\n\n              // Extract Open Interest\n              if (atmCall.open_interest !== undefined) {\n                setOiCallT1(atmCall.open_interest);\n                console.log(`✅ T1 Call OI: ${atmCall.open_interest}`);\n              }\n            } else {\n              console.log('⚠️ No ATM call found for T1 (strike ~', roundedStrike, ')');\n            }\n          } else {\n            console.log('⚠️ No results in T1 chain snapshot');\n          }\n        } else {\n          const errorText = await chain1Response.text();\n          console.error('❌ T1 chain snapshot failed:', chain1Response.status, errorText);\n        }\n\n        // Fetch T2 options using Option Chain Snapshot API\n        const chain2Url = `https://api.polygon.io/v3/snapshot/options/${symbol}?expiration_date.gte=${exp2Date}&expiration_date.lte=${exp2Date}&contract_type=call&limit=250&apiKey=${apiKey}`;\n        console.log('🔍 Fetching T2 chain snapshot:', chain2Url);\n\n        const chain2Response = await fetch(chain2Url);\n        if (chain2Response.ok) {\n          const chain2Data = await chain2Response.json();\n          console.log('📦 T2 Chain Snapshot Response:', chain2Data);\n\n          if (chain2Data.status === 'OK' && chain2Data.results && chain2Data.results.length > 0) {\n            // Find ATM call option\n            const atmCall2 = chain2Data.results\n              .filter(opt => opt.details?.strike_price && Math.abs(opt.details.strike_price - roundedStrike) < 20)\n              .sort((a, b) => Math.abs(a.details.strike_price - roundedStrike) - Math.abs(b.details.strike_price - roundedStrike))[0];\n\n            if (atmCall2) {\n              console.log('✅ Found T2 ATM Call:', atmCall2.details?.ticker, 'Strike:', atmCall2.details?.strike_price);\n\n              // Extract IV\n              if (atmCall2.implied_volatility !== undefined && atmCall2.implied_volatility > 0) {\n                const iv2Value = (atmCall2.implied_volatility * 100).toFixed(2);\n                setIv2(iv2Value);\n                gotRealIV2 = true;\n                console.log(`✅ T2 IV: ${iv2Value}%`);\n              } else {\n                console.log('⚠️ T2 IV not available:', atmCall2.implied_volatility);\n              }\n\n              // Extract Volume\n              if (atmCall2.day?.volume !== undefined) {\n                setVolumeCallT2(atmCall2.day.volume);\n                console.log(`✅ T2 Call Volume: ${atmCall2.day.volume}`);\n              }\n\n              // Extract Open Interest\n              if (atmCall2.open_interest !== undefined) {\n                setOiCallT2(atmCall2.open_interest);\n                console.log(`✅ T2 Call OI: ${atmCall2.open_interest}`);\n              }\n            } else {\n              console.log('⚠️ No ATM call found for T2 (strike ~', roundedStrike, ')');\n            }\n\n            // Now get PUT options for T2 from same chain\n            const atmPut2 = chain2Data.results\n              .filter(opt => opt.details?.contract_type === 'put' && opt.details?.strike_price && Math.abs(opt.details.strike_price - roundedStrike) < 20)\n              .sort((a, b) => Math.abs(a.details.strike_price - roundedStrike) - Math.abs(b.details.strike_price - roundedStrike))[0];\n\n            if (atmPut2) {\n              if (atmPut2.day?.volume !== undefined) {\n                setVolumePutT2(atmPut2.day.volume);\n                console.log(`✅ T2 Put Volume: ${atmPut2.day.volume}`);\n              }\n              if (atmPut2.open_interest !== undefined) {\n                setOiPutT2(atmPut2.open_interest);\n                console.log(`✅ T2 Put OI: ${atmPut2.open_interest}`);\n              }\n            }\n          } else {\n            console.log('⚠️ No results in T2 chain snapshot');\n          }\n        } else {\n          const errorText = await chain2Response.text();\n          console.error('❌ T2 chain snapshot failed:', chain2Response.status, errorText);\n        }\n\n        // Fetch PUT options for T1 using same approach\n        const chain1PutUrl = `https://api.polygon.io/v3/snapshot/options/${symbol}?expiration_date.gte=${exp1Date}&expiration_date.lte=${exp1Date}&contract_type=put&limit=250&apiKey=${apiKey}`;\n        console.log('🔍 Fetching T1 put chain snapshot');\n\n        const chain1PutResponse = await fetch(chain1PutUrl);\n        if (chain1PutResponse.ok) {\n          const chain1PutData = await chain1PutResponse.json();\n          if (chain1PutData.status === 'OK' && chain1PutData.results && chain1PutData.results.length > 0) {\n            const atmPut1 = chain1PutData.results\n              .filter(opt => opt.details?.strike_price && Math.abs(opt.details.strike_price - roundedStrike) < 20)\n              .sort((a, b) => Math.abs(a.details.strike_price - roundedStrike) - Math.abs(b.details.strike_price - roundedStrike))[0];\n\n            if (atmPut1) {\n              if (atmPut1.day?.volume !== undefined) {\n                setVolumePutT1(atmPut1.day.volume);\n                console.log(`✅ T1 Put Volume: ${atmPut1.day.volume}`);\n              }\n              if (atmPut1.open_interest !== undefined) {\n                setOiPutT1(atmPut1.open_interest);\n                console.log(`✅ T1 Put OI: ${atmPut1.open_interest}`);\n              }\n            }\n          }\n        }\n\n        // Set data source based on whether we got real IV\n        if (gotRealIV1 && gotRealIV2) {\n          setDataSource('real');\n          console.log('✅ Real options data loaded with IV from Polygon.io!');\n        } else if (gotRealIV1 || gotRealIV2) {\n          setDataSource('partial');\n          console.log('⚠️ Partial options data - some IV missing');\n        } else {\n          setDataSource('estimated');\n          console.log('⚠️ No IV data available - using estimates');\n        }\n      } catch (optError) {\n        console.error('Options data error:', optError);\n        setIv1('30');\n        setIv2('28');\n        setDataSource('estimated');\n      }\n\n      setLoading(false);\n      setLoadError(null);\n      setTimeout(() => calculateResults(), 100);\n    } catch (error) {\n      console.error('Error fetching option data:', error);\n      setLoadError(error.message || 'Failed to load option data');\n      setLoading(false);\n    }\n  };\n\n  const getNextFridays = () => {\n    const today = new Date();\n    let fridays = [];\n    let currentDate = new Date(today);\n\n    while (fridays.length < 50) {\n      if (currentDate.getDay() === 5) {\n        fridays.push(new Date(currentDate));\n      }\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    return fridays;\n  };\n\n  const normDist = (x) => {\n    const a1 = 0.254829592;\n    const a2 = -0.284496736;\n    const a3 = 1.421413741;\n    const a4 = -1.453152027;\n    const a5 = 1.061405429;\n    const p = 0.3275911;\n\n    const sign = x < 0 ? -1 : 1;\n    x = Math.abs(x) / Math.sqrt(2);\n\n    const t = 1.0 / (1.0 + p * x);\n    const y = 1.0 - (((((a5 * t + a4) * t + a3) * t + a2) * t + a1) * t * Math.exp(-x * x));\n\n    return 0.5 * (1.0 + sign * y);\n  };\n\n  const blackScholesCall = (S, K, T, r, sigma, q = 0) => {\n    if (T <= 0 || sigma <= 0) return Math.max(S - K, 0);\n    \n    const sqrtT = Math.sqrt(T);\n    const d1 = (Math.log(S / K) + (r - q + 0.5 * sigma * sigma) * T) / (sigma * sqrtT);\n    const d2 = d1 - sigma * sqrtT;\n    \n    const callPrice = S * Math.exp(-q * T) * normDist(d1) - K * Math.exp(-r * T) * normDist(d2);\n    return Math.max(callPrice, 0);\n  };\n\n  const blackScholesPut = (S, K, T, r, sigma, q = 0) => {\n    if (T <= 0 || sigma <= 0) return Math.max(K - S, 0);\n    \n    const sqrtT = Math.sqrt(T);\n    const d1 = (Math.log(S / K) + (r - q + 0.5 * sigma * sigma) * T) / (sigma * sqrtT);\n    const d2 = d1 - sigma * sqrtT;\n    \n    const putPrice = K * Math.exp(-r * T) * normDist(-d2) - S * Math.exp(-q * T) * normDist(-d1);\n    return Math.max(putPrice, 0);\n  };\n\n  const black76Call = (F, K, T, r, sigma) => {\n    if (T <= 0 || sigma <= 0) return Math.max(F - K, 0);\n    \n    const sqrtT = Math.sqrt(T);\n    const d1 = (Math.log(F / K) + (0.5 * sigma * sigma) * T) / (sigma * sqrtT);\n    const d2 = d1 - sigma * sqrtT;\n    \n    const callPrice = Math.exp(-r * T) * (F * normDist(d1) - K * normDist(d2));\n    return Math.max(callPrice, 0);\n  };\n\n  const black76Put = (F, K, T, r, sigma) => {\n    if (T <= 0 || sigma <= 0) return Math.max(K - F, 0);\n    \n    const sqrtT = Math.sqrt(T);\n    const d1 = (Math.log(F / K) + (0.5 * sigma * sigma) * T) / (sigma * sqrtT);\n    const d2 = d1 - sigma * sqrtT;\n    \n    const putPrice = Math.exp(-r * T) * (K * normDist(-d2) - F * normDist(-d1));\n    return Math.max(putPrice, 0);\n  };\n\n  const binomialCall = (S, K, T, r, sigma, q = 0, steps = 50) => {\n    const dt = T / steps;\n    const u = Math.exp(sigma * Math.sqrt(dt));\n    const d = 1 / u;\n    const p = (Math.exp((r - q) * dt) - d) / (u - d);\n    \n    // Stock prices at maturity\n    const prices = [];\n    for (let i = 0; i <= steps; i++) {\n      prices[i] = S * Math.pow(u, steps - i) * Math.pow(d, i);\n    }\n    \n    // Option values at maturity\n    const values = prices.map(price => Math.max(price - K, 0));\n    \n    // Backward induction\n    for (let j = steps - 1; j >= 0; j--) {\n      for (let i = 0; i <= j; i++) {\n        values[i] = Math.exp(-r * dt) * (p * values[i] + (1 - p) * values[i + 1]);\n      }\n    }\n    \n    return values[0];\n  };\n\n  const binomialPut = (S, K, T, r, sigma, q = 0, steps = 50) => {\n    const dt = T / steps;\n    const u = Math.exp(sigma * Math.sqrt(dt));\n    const d = 1 / u;\n    const p = (Math.exp((r - q) * dt) - d) / (u - d);\n    \n    // Stock prices at maturity\n    const prices = [];\n    for (let i = 0; i <= steps; i++) {\n      prices[i] = S * Math.pow(u, steps - i) * Math.pow(d, i);\n    }\n    \n    // Option values at maturity\n    const values = prices.map(price => Math.max(K - price, 0));\n    \n    // Backward induction\n    for (let j = steps - 1; j >= 0; j--) {\n      for (let i = 0; i <= j; i++) {\n        values[i] = Math.exp(-r * dt) * (p * values[i] + (1 - p) * values[i + 1]);\n      }\n    }\n    \n    return values[0];\n  };\n\n  const getOptionPrice = (S, K, T, r, sigma, q, isCall) => {\n    switch(pricingModel) {\n      case 'black76':\n        const F = S * Math.exp((r - q) * T);\n        return isCall ? black76Call(F, K, T, r, sigma) : black76Put(F, K, T, r, sigma);\n      case 'binomial':\n        return isCall ? binomialCall(S, K, T, r, sigma, q) : binomialPut(S, K, T, r, sigma, q);\n      case 'blackscholes':\n      default:\n        return isCall ? blackScholesCall(S, K, T, r, sigma, q) : blackScholesPut(S, K, T, r, sigma, q);\n    }\n  };\n\n  const handlePriceSlider = (newPrice, isCallSpread) => {\n    if (!result) return;\n\n    const S = parseFloat(spotPrice);\n    const K = parseFloat(strikePrice);\n    const v1 = parseFloat(iv1) / 100;\n    const r = parseFloat(riskFreeRate) / 100;\n    const q = parseFloat(dividend) / 100;\n    \n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    const now = new Date();\n    \n    const d1_16NY = new Date(d1);\n    d1_16NY.setHours(22, 0, 0, 0);\n    \n    const d2_16NY = new Date(d2);\n    d2_16NY.setHours(22, 0, 0, 0);\n\n    const msPerDay = 24 * 60 * 60 * 1000;\n    const daysToExp1 = (d1_16NY - now) / msPerDay;\n    const daysToExp2 = (d2_16NY - now) / msPerDay;\n    \n    const T1 = daysToExp1 / 365;\n    const T2 = daysToExp2 / 365;\n    \n    const frontPrice = isCallSpread \n      ? getOptionPrice(S, K, T1, r, v1, q, true)\n      : getOptionPrice(S, K, T1, r, v1, q, false);\n    \n    // Target Back-Option Preis basierend auf neuer Spread-Preis\n    const targetBackPrice = newPrice + frontPrice;\n    \n    // Binäre Suche nach der IV2, die zu targetBackPrice führt\n    let v2Low = 0.001;\n    let v2High = 3.0;\n    let v2Mid = 1.0;\n    \n    for (let iteration = 0; iteration < 100; iteration++) {\n      v2Mid = (v2Low + v2High) / 2;\n      const backPrice = isCallSpread \n        ? getOptionPrice(S, K, T2, r, v2Mid, q, true)\n        : getOptionPrice(S, K, T2, r, v2Mid, q, false);\n      \n      const diff = backPrice - targetBackPrice;\n      \n      if (Math.abs(diff) < 0.00001) break;\n      \n      if (diff > 0) {\n        v2High = v2Mid;\n      } else {\n        v2Low = v2Mid;\n      }\n    }\n    \n    // Mit dieser gefundenen IV2 berechne den echten FF\n    const numerator = (T2 * v2Mid * v2Mid) - (T1 * v1 * v1);\n    const denominator = T2 - T1;\n    \n    let newFF;\n    if (numerator >= 0 && denominator > 0) {\n      const forwardVol = Math.sqrt(numerator / denominator);\n      newFF = ((v1 / forwardVol) - 1) * 100;\n    } else {\n      newFF = parseFloat(result.forwardFactor);\n    }\n    \n    if (isCallSpread) {\n      setCallPriceSlider(newPrice);\n      setAdjustedFFCall(newFF);\n    } else {\n      setPutPriceSlider(newPrice);\n      setAdjustedFFPut(newFF);\n    }\n  };\n\n  const calculateResults = () => {\n    try {\n      const d1 = new Date(date1);\n      const d2 = new Date(date2);\n      \n      if (d2 <= d1) {\n        setResult({ error: 'Expiration 2 muss nach Expiration 1 liegen' });\n        return;\n      }\n\n      // Berechne verbleibende Zeit mit Berücksichtigung der NY-Schließzeit (16:00 EST = 22:00 Berlin)\n      const now = new Date();\n      const d1_16NY = new Date(d1);\n      d1_16NY.setHours(22, 0, 0, 0); // 16:00 EST = 22:00 Berlin (CET)\n      \n      const d2_16NY = new Date(d2);\n      d2_16NY.setHours(22, 0, 0, 0); // 16:00 EST = 22:00 Berlin (CET)\n\n      // Berechne verbleibende Tage mit Dezimalgenauigkeit (keine Rundung)\n      const msPerDay = 24 * 60 * 60 * 1000;\n      const daysToExp1 = (d1_16NY - now) / msPerDay;\n      const daysToExp2 = (d2_16NY - now) / msPerDay;\n\n      if (daysToExp1 <= 0 || daysToExp2 <= 0) {\n        setResult({ error: 'Ablaufdatum liegt in der Vergangenheit' });\n        return;\n      }\n\n      // Zeitberechnung in Jahren - KEINE Rundung!\n      const T1 = daysToExp1 / 365;\n      const T2 = daysToExp2 / 365;\n\n      const v1 = parseFloat(iv1) / 100;\n      const v2 = parseFloat(iv2) / 100;\n      const S = parseFloat(spotPrice);\n      const K = parseFloat(strikePrice);\n      const r = parseFloat(riskFreeRate) / 100;\n      const q = parseFloat(dividend) / 100;\n\n      if (v1 <= 0 || v2 <= 0 || S <= 0 || K <= 0) {\n        setResult({ error: 'Bitte überprüfe deine Eingaben' });\n        return;\n      }\n\n      const numerator = (T2 * v2 * v2) - (T1 * v1 * v1);\n      const denominator = T2 - T1;\n      \n      if (numerator < 0) {\n        setResult({ error: 'Ungültige IV Kombination - Forward Vol wäre imaginär' });\n        return;\n      }\n      \n      const forwardVol = Math.sqrt(numerator / denominator);\n      const forwardVolPct = forwardVol * 100;\n      const forwardFactor = (v1 / forwardVol) - 1;\n\n      const callT1 = getOptionPrice(S, K, T1, r, v1, q, true);\n      const callT2 = getOptionPrice(S, K, T2, r, v2, q, true);\n      const callCalendarSpread = callT2 - callT1;\n\n      const putT1 = getOptionPrice(S, K, T1, r, v1, q, false);\n      const putT2 = getOptionPrice(S, K, T2, r, v2, q, false);\n      const putCalendarSpread = putT2 - putT1;\n\n      // FF = 30%\n      const targetForwardFactor30 = 0.30;\n      const requiredForwardVol30 = v1 / (1 + targetForwardFactor30);\n      const iv2Squared30 = (requiredForwardVol30 * requiredForwardVol30 * (T2 - T1) + T1 * v1 * v1) / T2;\n      const requiredIV230 = Math.sqrt(Math.max(0, iv2Squared30));\n      \n      const callT2At30 = getOptionPrice(S, K, T2, r, requiredIV230, q, true);\n      const maxCallCalendarPrice30 = callT2At30 - callT1;\n      \n      const putT2At30 = getOptionPrice(S, K, T2, r, requiredIV230, q, false);\n      const maxPutCalendarPrice30 = putT2At30 - putT1;\n\n      // FF = 0%\n      const targetForwardFactor0 = 0;\n      const requiredForwardVol0 = v1 / (1 + targetForwardFactor0);\n      const iv2Squared0 = (requiredForwardVol0 * requiredForwardVol0 * (T2 - T1) + T1 * v1 * v1) / T2;\n      const requiredIV20 = Math.sqrt(Math.max(0, iv2Squared0));\n      \n      const callT2At0 = getOptionPrice(S, K, T2, r, requiredIV20, q, true);\n      const callCalendarSpreadAt0 = callT2At0 - callT1;\n      \n      const putT2At0 = getOptionPrice(S, K, T2, r, requiredIV20, q, false);\n      const putCalendarSpreadAt0 = putT2At0 - putT1;\n\n      const newResult = {\n        forwardVolPct: parseFloat(forwardVolPct).toFixed(2),\n        forwardFactor: (parseFloat(forwardFactor) * 100).toFixed(2),\n        daysToExp1: parseFloat(daysToExp1).toFixed(2),\n        daysToExp2: parseFloat(daysToExp2).toFixed(2),\n        callT1: parseFloat(callT1).toFixed(2),\n        callT2: parseFloat(callT2).toFixed(2),\n        callCalendarSpread: parseFloat(callCalendarSpread).toFixed(2),\n        putT1: parseFloat(putT1).toFixed(2),\n        putT2: parseFloat(putT2).toFixed(2),\n        putCalendarSpread: parseFloat(putCalendarSpread).toFixed(2),\n        maxCallCalendarPrice30: Math.max(0, parseFloat(maxCallCalendarPrice30)).toFixed(2),\n        maxPutCalendarPrice30: Math.max(0, parseFloat(maxPutCalendarPrice30)).toFixed(2),\n        callCalendarSpreadAt0: parseFloat(callCalendarSpreadAt0).toFixed(2),\n        putCalendarSpreadAt0: parseFloat(putCalendarSpreadAt0).toFixed(2),\n        error: null,\n        timestamp: new Date().toLocaleString('de-DE')\n      };\n\n      setResult(newResult);\n      \n      const historyEntry = {\n        ticker: ticker || 'N/A',\n        date: date1,\n        ff: parseFloat(newResult.forwardFactor),\n        callSpreadCurrent: newResult.callCalendarSpread,\n        putSpreadCurrent: newResult.putCalendarSpread,\n        callSpreadFF30: newResult.maxCallCalendarPrice30,\n        putSpreadFF30: newResult.maxPutCalendarPrice30,\n        callSpreadFF0: newResult.callCalendarSpreadAt0,\n        putSpreadFF0: newResult.putCalendarSpreadAt0,\n        timestamp: newResult.timestamp\n      };\n      setTradeHistory([historyEntry, ...tradeHistory.slice(0, 9)]);\n\n    } catch (err) {\n      setResult({ error: 'Fehler bei der Berechnung: ' + err.message });\n    }\n  };\n\n  const renderCalendar = (value, onChange, show, setShow) => {\n    if (!show) return null;\n\n    const today = new Date();\n    let fridays = [];\n    let currentDate = new Date(today);\n\n    while (fridays.length < 50) {\n      if (currentDate.getDay() === 5) {\n        fridays.push(new Date(currentDate));\n      }\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n\n    return (\n      <div\n        className={`absolute z-50 mt-3 w-72 overflow-hidden rounded-lg border px-0 pb-3 backdrop-blur-2xl shadow-[0_30px_80px_-25px_rgba(15,23,42,0.6)] ${darkMode ? 'border-slate-700 bg-slate-900/95 text-slate-100' : 'border-white/70 bg-white/95 text-slate-900'}`}\n      >\n        <div className=\"sticky top-0 flex items-center justify-between bg-inherit px-4 py-3\">\n          <h3 className=\"text-xs font-semibold uppercase tracking-wide\">Next 50 Fridays</h3>\n          <button\n            onClick={() => setShow(false)}\n            className={`text-xs font-semibold transition ${darkMode ? 'text-slate-400 hover:text-slate-200' : 'text-slate-500 hover:text-slate-700'}`}\n          >\n            ✕\n          </button>\n        </div>\n        <div className=\"space-y-1 px-3\">\n          {fridays.map(friday => {\n            const dateStr = friday.toISOString().split('T')[0];\n            const isSelected = dateStr === value;\n            const daysAway = Math.floor((friday - today) / (1000 * 60 * 60 * 24));\n\n            return (\n              <button\n                key={dateStr}\n                onClick={() => {\n                  onChange(dateStr);\n                  setShow(false);\n                }}\n                className={`w-full rounded-xl px-3 py-2 text-left text-sm font-semibold transition ${\n                  isSelected\n                    ? 'bg-gradient-to-r from-sky-500 to-indigo-500 text-white shadow-lg'\n                    : darkMode\n                    ? 'bg-slate-900/70 text-slate-100 hover:bg-slate-800/80'\n                    : 'bg-white/80 text-slate-900 hover:bg-slate-100'\n                }`}\n              >\n                {friday.toLocaleDateString('de-DE')} ({daysAway}d)\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const getFFColor = (ff) => {\n    const ffNum = parseFloat(ff);\n    if (ffNum >= 30) {\n      return darkMode\n        ? 'border border-emerald-400/50 bg-emerald-500/15 text-emerald-200'\n        : 'border border-emerald-300 bg-emerald-100 text-emerald-800';\n    }\n    if (ffNum >= 16) {\n      return darkMode\n        ? 'border border-amber-400/50 bg-amber-500/15 text-amber-200'\n        : 'border border-amber-300 bg-amber-100 text-amber-800';\n    }\n    return darkMode\n      ? 'border border-slate-600/70 bg-slate-900/70 text-slate-200'\n      : 'border border-slate-200 bg-slate-50 text-slate-900';\n  };\n\n  const getLiquidityColor = (volume, openInterest) => {\n    if (!volume && !openInterest) return darkMode ? 'text-slate-500' : 'text-slate-400';\n\n    const vol = volume || 0;\n    const oi = openInterest || 0;\n\n    if (vol > 1000 || oi > 5000) return 'text-emerald-500';\n    if (vol > 100 || oi > 1000) return 'text-amber-500';\n    return 'text-rose-500';\n  };\n\n  const getLiquidityLabel = (volume, openInterest) => {\n    if (!volume && !openInterest) return 'N/A';\n\n    const vol = volume || 0;\n    const oi = openInterest || 0;\n\n    if (vol > 1000 || oi > 5000) return 'High';\n    if (vol > 100 || oi > 1000) return 'Medium';\n    return 'Low';\n  };\n\n  const chartData = [\n    { dte: 0, iv: (parseFloat(iv1)).toFixed(2) },\n    { dte: (parseFloat(result?.daysToExp1) || 7) / 2, iv: (parseFloat(iv1) * 0.7 + parseFloat(iv2) * 0.3).toFixed(2) },\n    { dte: parseFloat(result?.daysToExp2) || 14, iv: (parseFloat(iv2)).toFixed(2) }\n  ];\n\n  const exportCSV = () => {\n    if (!result || result.error) return;\n    \n    const csv = [\n      ['Calendar Spread Trade'],\n      ['Datum', new Date().toLocaleString('de-DE')],\n      [],\n      ['Expiration 1', date1],\n      ['Expiration 2', date2],\n      ['IV Exp 1', iv1 + '%'],\n      ['IV Exp 2', iv2 + '%'],\n      ['Aktienkurs', spotPrice],\n      ['Strike', strikePrice],\n      [],\n      ['Forward Volatility', result.forwardVolPct + '%'],\n      ['Forward Faktor', result.forwardFactor + '%'],\n      ['Call Calendar Spread', result.callCalendarSpread],\n      ['Put Calendar Spread', result.putCalendarSpread],\n      ['Max Call für FF +30%', result.maxCallCalendarPrice30],\n      ['Max Put für FF +30%', result.maxPutCalendarPrice30]\n    ].map(row => row.join(',')).join('\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `calendar-trade-${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n  };\n\n  const backgroundClass = darkMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-900';\n  const cardClass = darkMode\n    ? 'bg-gray-800 border border-gray-700'\n    : 'bg-white border border-gray-200';\n  const inputClass = darkMode\n    ? 'bg-gray-700 border-gray-600 text-white'\n    : 'bg-white border-gray-300 text-gray-900';\n  const subtleTextClass = darkMode ? 'text-gray-400' : 'text-gray-600';\n  const pricingModelLabel = {\n    blackscholes: 'Black-Scholes',\n    black76: 'Black-76',\n    binomial: 'Binomial'\n  }[pricingModel] || pricingModel;\n  const dataSourceMeta = (() => {\n    switch (dataSource) {\n      case 'real':\n        return {\n          label: 'Real IV (Polygon.io)',\n          className: darkMode\n            ? 'border-emerald-500/40 bg-emerald-500/10 text-emerald-200'\n            : 'border-emerald-300 bg-emerald-50 text-emerald-700'\n        };\n      case 'demo':\n        return {\n          label: 'Demo Dataset (SPY)',\n          className: darkMode\n            ? 'border-sky-500/40 bg-sky-500/10 text-sky-200'\n            : 'border-sky-300 bg-sky-50 text-sky-700'\n        };\n      case 'estimated':\n        return {\n          label: 'Estimated IV (fallback)',\n          className: darkMode\n            ? 'border-amber-500/40 bg-amber-500/10 text-amber-200'\n            : 'border-amber-300 bg-amber-50 text-amber-700'\n        };\n      default:\n        return null;\n    }\n  })();\n\n  return (\n    <div className={`min-h-screen p-6 ${backgroundClass}`}>\n      <div className=\"max-w-6xl mx-auto\">\n        <div className={`${cardClass} rounded-lg p-6 mb-6`}>\n          <div className=\"flex justify-between items-center mb-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">Calendar Spread Calculator</h1>\n              <p className={`text-sm ${subtleTextClass}`}>Forward Volatility & Forward Factor Analyse</p>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setShowScanner(!showScanner)}\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                  showScanner\n                    ? 'bg-blue-600 text-white'\n                    : darkMode\n                    ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                FF Scanner\n              </button>\n              <select\n                value={pricingModel}\n                onChange={(e) => setPricingModel(e.target.value)}\n                className={`px-4 py-2 rounded-lg border ${inputClass}`}\n              >\n                <option value=\"blackscholes\">Black-Scholes</option>\n                <option value=\"black76\">Black-76</option>\n                <option value=\"binomial\">Binomial</option>\n              </select>\n              <button\n                onClick={() => setDarkMode(!darkMode)}\n                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-yellow-400' : 'bg-gray-200 text-gray-700'}`}\n              >\n                {darkMode ? <Sun size={20} /> : <Moon size={20} />}\n              </button>\n            </div>\n          </div>\n\n          {result && (\n            <div className=\"grid grid-cols-4 gap-4\">\n              <div className={`${cardClass} p-4 rounded-lg`}>\n                <p className={`text-xs ${subtleTextClass}`}>Forward Vol</p>\n                <p className=\"text-2xl font-bold text-blue-500\">{result.forwardVolPct}%</p>\n              </div>\n              <div className={`${cardClass} p-4 rounded-lg`}>\n                <p className={`text-xs ${subtleTextClass}`}>Forward Factor</p>\n                <p className=\"text-2xl font-bold text-purple-500\">{result.forwardFactor}%</p>\n              </div>\n              <div className={`${cardClass} p-4 rounded-lg`}>\n                <p className={`text-xs ${subtleTextClass}`}>DTE</p>\n                <p className=\"text-2xl font-bold text-green-500\">{result.daysToExp1}-{result.daysToExp2}</p>\n              </div>\n              <div className={`${cardClass} p-4 rounded-lg`}>\n                <p className={`text-xs ${subtleTextClass}`}>Model</p>\n                <p className=\"text-lg font-bold\">{pricingModelLabel}</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {showScanner && (\n          <div className={`${cardClass} rounded-lg p-6 mb-6`}>\n            <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-semibold\">Forward Factor Scanner</h2>\n                <p className={`mt-1 text-sm ${subtleTextClass}`}>\n                  Scan liquid US underlyings to discover calendar spreads with a Forward Factor above your threshold.\n                </p>\n              </div>\n              <div className={`flex items-center gap-2 rounded-lg border px-3 py-2 text-xs font-semibold ${darkMode ? 'border-emerald-500/30 bg-emerald-500/10 text-emerald-200' : 'border-emerald-300 bg-emerald-50 text-emerald-700'}`}>\n                <span>✅ Polygon.io Options IV</span>\n                <span>•</span>\n                <span>{scanning ? 'Scanning…' : 'Ready'}</span>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex flex-col gap-4 md:flex-row md:items-end\">\n              <div className=\"md:flex-1\">\n                <label className=\"text-xs font-semibold uppercase tracking-wide\">Minimum Forward Factor (%)</label>\n                <input\n                  type=\"number\"\n                  value={minFF}\n                  onChange={(e) => setMinFF(parseFloat(e.target.value || 0))}\n                  className={`px-4 py-2 rounded-lg border ${inputClass} mt-2`}\n                  step=\"1\"\n                  min=\"0\"\n                  max=\"100\"\n                  disabled={scanning}\n                />\n              </div>\n              <button\n                onClick={runFFScanner}\n                disabled={scanning}\n                className={`rounded-lg px-6 py-3 text-sm font-semibold transition-all ${\n                  scanning\n                    ? 'cursor-not-allowed bg-slate-400/40 text-slate-200'\n                    : 'bg-gradient-to-r from-purple-500 via-indigo-500 to-sky-500 text-white shadow-lg shadow-purple-500/30 hover:shadow-purple-500/45'\n                }`}\n              >\n                {scanning ? `Scanning… ${scanProgress.current}/${scanProgress.total}` : 'Run Scanner'}\n              </button>\n            </div>\n\n            {scanning && (\n              <div className=\"mt-4\">\n                <div className={`h-2 w-full overflow-hidden rounded-full ${darkMode ? 'bg-slate-800' : 'bg-slate-200'}`}>\n                  <div\n                    className=\"h-full rounded-full bg-gradient-to-r from-purple-500 via-indigo-500 to-sky-500 transition-all duration-300\"\n                    style={{ width: scanProgress.total ? `${(scanProgress.current / scanProgress.total) * 100}%` : '0%' }}\n                  />\n                </div>\n              </div>\n            )}\n\n            {scanLogs.length > 0 && (\n              <div className={`mt-6 rounded-lg border p-4 ${darkMode ? 'border-slate-700 bg-slate-900/60' : 'border-slate-200 bg-white/80'}`}>\n                <p className=\"text-xs font-semibold uppercase tracking-wide\">Scan Progress</p>\n                <div className=\"mt-3 max-h-56 space-y-1 overflow-y-auto text-xs font-mono\">\n                  {scanLogs.map((log, idx) => (\n                    <div key={idx} className={darkMode ? 'text-slate-200' : 'text-slate-700'}>\n                      {log}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {scanResults.length > 0 && (\n              <div className=\"mt-6 overflow-x-auto\">\n                <table className={`w-full text-sm ${darkMode ? 'text-slate-200' : 'text-slate-700'}`}>\n                  <thead className={darkMode ? 'bg-slate-900/70 text-slate-100' : 'bg-slate-100 text-slate-800'}>\n                    <tr>\n                      <th className=\"px-4 py-3 text-left\">Symbol</th>\n                      <th className=\"px-4 py-3 text-left\">Price</th>\n                      <th className=\"px-4 py-3 text-left\">Strike</th>\n                      <th className=\"px-4 py-3 text-left\">FF (%)</th>\n                      <th className=\"px-4 py-3 text-left\">Forward Vol (%)</th>\n                      <th className=\"px-4 py-3 text-left\">IV 1 / IV 2</th>\n                      <th className=\"px-4 py-3 text-left\">Expirations</th>\n                      <th className=\"px-4 py-3 text-left\">DTE</th>\n                      <th className=\"px-4 py-3 text-left\">Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {scanResults.map((scan, idx) => (\n                      <tr\n                        key={idx}\n                        className={`border-b ${darkMode ? 'border-slate-800 hover:bg-slate-900/70' : 'border-slate-200 hover:bg-slate-50'} transition`}\n                      >\n                        <td className=\"px-4 py-3 font-semibold\">{scan.symbol}</td>\n                        <td className=\"px-4 py-3\">${scan.price}</td>\n                        <td className=\"px-4 py-3\">${scan.strike}</td>\n                        <td className=\"px-4 py-3\">\n                          <span className={`font-bold ${parseFloat(scan.ff) >= 30 ? 'text-emerald-500' : 'text-amber-500'}`}>\n                            {scan.ff}%\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3\">{scan.fv}%</td>\n                        <td className=\"px-4 py-3\">{scan.iv1}% / {scan.iv2}%</td>\n                        <td className=\"px-4 py-3 text-xs\">\n                          <div>{scan.exp1}</div>\n                          <div>→ {scan.exp2}</div>\n                        </td>\n                        <td className=\"px-4 py-3 text-xs\">\n                          {scan.dte1}d → {scan.dte2}d\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <button\n                            onClick={() => {\n                              setTicker(scan.symbol);\n                              setSpotPrice(scan.price);\n                              setStrikePrice(scan.strike);\n                              setIv1(scan.iv1);\n                              setIv2(scan.iv2);\n                              setDate1(scan.exp1);\n                              setDate2(scan.exp2);\n                              setDataSource('real');\n                              setShowScanner(false);\n                              setTimeout(() => calculateResults(), 100);\n                            }}\n                            className={`rounded-xl px-4 py-2 text-xs font-semibold ${darkMode ? 'bg-sky-600 text-white hover:bg-sky-500' : 'bg-sky-500 text-white hover:bg-sky-600'}`}\n                          >\n                            Load\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n\n            {!scanning && scanResults.length === 0 && scanProgress.total > 0 && (\n              <div className={`mt-6 rounded-lg border px-4 py-6 text-center text-sm ${darkMode ? 'border-slate-700 text-slate-300' : 'border-slate-200 text-slate-600'}`}>\n                No stocks found with FF ≥ {minFF}%. Try lowering the threshold.\n              </div>\n            )}\n          </div>\n        )}\n\n        <div className=\"mt-10 grid grid-cols-1 gap-6 lg:grid-cols-4\">\n          <div className={`lg:col-span-1 ${cardClass} rounded-lg p-6 lg:p-8`}>\n            <div className=\"space-y-6\">\n              <div>\n                <h2 className=\"text-lg font-semibold\">Parameter</h2>\n                <p className={`mt-1 text-sm ${subtleTextClass}`}>Live-Daten oder Demo laden und sofort durchstarten.</p>\n              </div>\n\n              <div>\n                <label className=\"text-xs font-semibold uppercase tracking-wide\">Polygon.io API Key</label>\n                <input\n                  type=\"password\"\n                  value={apiKey}\n                  onChange={(e) => setApiKey(e.target.value)}\n                  className={`px-4 py-2 rounded-lg border ${inputClass} mt-2`}\n                  placeholder=\"Paste your Polygon.io API key\"\n                />\n                <a\n                  href=\"https://polygon.io/dashboard/signup\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"mt-2 inline-flex items-center text-xs font-semibold text-sky-400 hover:text-sky-300\"\n                >\n                  Get free API key → (End-of-Day data)\n                </a>\n              </div>\n\n              <div className=\"space-y-3\">\n                <label className=\"text-xs font-semibold uppercase tracking-wide\">Ticker Symbol</label>\n                <div className=\"relative\">\n                  <input\n                    type=\"text\"\n                    value={ticker}\n                    onChange={(e) => handleTickerChange(e.target.value)}\n                    onFocus={() => handleTickerChange(ticker)}\n                    className={`px-4 py-2 rounded-lg border ${inputClass}`}\n                    placeholder=\"e.g. SPY\"\n                  />\n                  {showTickerDropdown && (\n                    <div className={`absolute z-40 mt-2 max-h-56 w-full overflow-y-auto rounded-lg border backdrop-blur-xl shadow-[0_30px_80px_-25px_rgba(15,23,42,0.6)] ${darkMode ? 'border-slate-700 bg-slate-900/95 text-slate-100' : 'border-white/70 bg-white/95 text-slate-900'}`}>\n                      {filteredTickers.length > 0 ? (\n                        filteredTickers.map(stock => (\n                          <button\n                            key={stock.symbol}\n                            onClick={() => selectTicker(stock.symbol)}\n                            className={`flex w-full items-center justify-between px-4 py-2 text-sm transition ${darkMode ? 'hover:bg-slate-800/80' : 'hover:bg-slate-100/80'}`}\n                          >\n                            <span className=\"font-semibold\">{stock.symbol}</span>\n                            <span className=\"ml-2 text-xs opacity-70\">{stock.name}</span>\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"px-4 py-3 text-sm opacity-70\">No matches found</div>\n                      )}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex flex-col gap-2 sm:flex-row\">\n                  <button\n                    onClick={() => fetchOptionData(ticker)}\n                    className={`w-full bg-blue-600 text-white font-semibold py-3 rounded-lg hover:bg-blue-700 transition-colors sm:flex-1`}\n                    disabled={loading}\n                  >\n                    {loading ? 'Loading…' : 'Load Latest Market Data'}\n                  </button>\n                  <button\n                    onClick={loadDemoData}\n                    className={`sm:w-auto rounded-lg px-5 py-3 text-sm font-semibold transition-all duration-300 ${darkMode ? 'bg-emerald-500/15 text-emerald-200 hover:bg-emerald-500/25' : 'bg-emerald-50 text-emerald-600 hover:bg-emerald-100'}`}\n                  >\n                    Demo Data (SPY)\n                  </button>\n                </div>\n                {loadError && <p className=\"text-xs font-semibold text-rose-400\">{loadError}</p>}\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4\">\n                {[\n                  { label: 'Expiration 1', value: date1, onClick: () => { setShowCalendar1(true); setShowCalendar2(false); }, calendar: renderCalendar(date1, setDate1, showCalendar1, setShowCalendar1) },\n                  { label: 'Expiration 2', value: date2, onClick: () => { setShowCalendar2(true); setShowCalendar1(false); }, calendar: renderCalendar(date2, setDate2, showCalendar2, setShowCalendar2) }\n                ].map((item, idx) => (\n                  <div className=\"relative\" key={idx}>\n                    <label className=\"text-xs font-semibold uppercase tracking-wide\">{item.label}</label>\n                    <button\n                      onClick={item.onClick}\n                      className={`mt-2 flex w-full items-center justify-between rounded-lg px-4 py-3 text-left text-sm font-semibold transition ${darkMode ? 'bg-slate-900/70 text-slate-100 hover:border-sky-400/60 border border-slate-700' : 'bg-white/80 text-slate-900 hover:border-sky-500 border border-white/60'}`}\n                    >\n                      <span>{new Date(item.value).toLocaleDateString('en-US')}</span>\n                      <Calendar className=\"h-5 w-5\" />\n                    </button>\n                    {item.calendar}\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4\">\n                {[\n                  { label: 'IV Exp 1 (%)', value: iv1, setter: setIv1 },\n                  { label: 'IV Exp 2 (%)', value: iv2, setter: setIv2 },\n                  { label: 'Stock Price', value: spotPrice, setter: setSpotPrice },\n                  { label: 'Strike', value: strikePrice, setter: setStrikePrice },\n                  { label: 'Risk-Free Rate (%)', value: riskFreeRate, setter: setRiskFreeRate },\n                  { label: 'Dividend (%)', value: dividend, setter: setDividend }\n                ].map((field, idx) => (\n                  <div key={idx} className=\"space-y-2\">\n                    <label className=\"text-xs font-semibold uppercase tracking-wide\">{field.label}</label>\n                    <input\n                      type=\"number\"\n                      value={field.value}\n                      onChange={(e) => field.setter(e.target.value)}\n                      className={baseInputClass}\n                      step=\"0.01\"\n                    />\n                  </div>\n                ))}\n              </div>\n\n              <button onClick={calculateResults} className={primaryButtonClass}>\n                Calculate\n              </button>\n            </div>\n          </div>\n\n          <div className={`lg:col-span-3 ${cardClass} rounded-lg p-6 lg:p-8`}>\n            <div className=\"space-y-6\">\n              {result && (\n                <>\n                  {result.error ? (\n                    <div className={`${cardClass} rounded-lg border border-rose-500/40 p-6 ${darkMode ? 'text-rose-200' : 'text-rose-600'}`}>\n                      <p className=\"font-semibold\">{result.error}</p>\n                    </div>\n                  ) : (\n                    <>\n                      {dataSourceMeta && (\n                        <div className={`flex items-center gap-2 rounded-lg border px-4 py-2 text-xs font-semibold ${dataSourceMeta.className}`}>\n                          <span>Data Source</span>\n                          <span>•</span>\n                          <span>{dataSourceMeta.label}</span>\n                        </div>\n                      )}\n\n                      <div className=\"grid grid-cols-1 gap-4 lg:grid-cols-2\">\n                        <div className={`${cardClass} rounded-lg border border-sky-400/35 p-6`}>\n                          <p className=\"text-xs uppercase tracking-wide text-sky-300\">Forward Volatility</p>\n                          <p className=\"mt-3 text-3xl font-semibold\">{result.forwardVolPct}%</p>\n                          <p className={`mt-2 text-xs ${subtleTextClass}`}>{result.daysToExp1}-{result.daysToExp2} DTE</p>\n                        </div>\n                        <div className={`${cardClass} rounded-lg border border-emerald-400/35 p-6 ${getFFColor(result.forwardFactor)}`}>\n                          <p className=\"text-xs uppercase tracking-wide opacity-80\">Forward Faktor</p>\n                          <p className=\"mt-3 text-3xl font-semibold\">{result.forwardFactor}%</p>\n                          <p className=\"mt-2 text-xs opacity-80\">\n                            {parseFloat(result.forwardFactor) >= 30 ? '✓ Excellent' : parseFloat(result.forwardFactor) >= 16 ? '✓ Good' : 'Below threshold'}\n                          </p>\n                        </div>\n                      </div>\n\n                      <div className={`${cardClass} rounded-lg border border-rose-500/35 p-6`}>\n                        <p className=\"text-lg font-semibold text-rose-400\">Target Price for FF 30%</p>\n                        <div className=\"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                          <div className=\"rounded-lg border border-rose-400/40 bg-rose-500/10 p-4 text-center\">\n                            <p className=\"text-xs uppercase tracking-wide text-rose-300\">Call Spread</p>\n                            <p className=\"mt-3 text-4xl font-semibold text-rose-200\">${result.maxCallCalendarPrice30}</p>\n                            <p className={`mt-2 text-xs ${subtleTextClass}`}>Max Entry Price</p>\n                          </div>\n                          <div className=\"rounded-lg border border-rose-400/40 bg-rose-500/10 p-4 text-center\">\n                            <p className=\"text-xs uppercase tracking-wide text-rose-300\">Put Spread</p>\n                            <p className=\"mt-3 text-4xl font-semibold text-rose-200\">${result.maxPutCalendarPrice30}</p>\n                            <p className={`mt-2 text-xs ${subtleTextClass}`}>Max Entry Price</p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className={`${cardClass} rounded-lg border border-sky-500/35 p-6`}>\n                        <p className=\"text-lg font-semibold text-sky-400\">Current Calendar Spreads</p>\n                        <div className=\"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                          <div className=\"rounded-lg border border-sky-400/30 bg-sky-500/10 p-4\">\n                            <p className=\"text-xs uppercase tracking-wide text-sky-200\">Call Spread</p>\n                            <div className=\"mt-3 space-y-2\">\n                              <div className=\"flex items-center justify-between text-sm\">\n                                <span>Current Price</span>\n                                <span className=\"text-2xl font-semibold text-sky-100\">${result.callCalendarSpread}</span>\n                              </div>\n                              <div className=\"flex items-center justify-between text-xs opacity-80\">\n                                <span>For FF 0%</span>\n                                <span className=\"font-semibold\">${result.callCalendarSpreadAt0}</span>\n                              </div>\n                            </div>\n                            {(volumeCallT1 !== null || volumeCallT2 !== null || oiCallT1 !== null || oiCallT2 !== null) && (\n                              <div className=\"mt-3 space-y-2 text-xs\">\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                  <div>\n                                    <p className=\"uppercase text-[10px] opacity-70\">T1 Flow</p>\n                                    <p className={`font-semibold ${getLiquidityColor(volumeCallT1, oiCallT1)}`}>\n                                      {volumeCallT1 !== null ? volumeCallT1.toLocaleString() : 'N/A'}\n                                    </p>\n                                    <p className={`text-[10px] ${darkMode ? 'text-slate-300' : 'text-slate-500'}`}>\n                                      OI:{' '}\n                                      <span className={`font-semibold ${getLiquidityColor(volumeCallT1, oiCallT1)}`}>\n                                        {oiCallT1 !== null ? oiCallT1.toLocaleString() : 'N/A'}\n                                      </span>\n                                    </p>\n                                  </div>\n                                  <div>\n                                    <p className=\"uppercase text-[10px] opacity-70\">T2 Flow</p>\n                                    <p className={`font-semibold ${getLiquidityColor(volumeCallT2, oiCallT2)}`}>\n                                      {volumeCallT2 !== null ? volumeCallT2.toLocaleString() : 'N/A'}\n                                    </p>\n                                    <p className={`text-[10px] ${darkMode ? 'text-slate-300' : 'text-slate-500'}`}>\n                                      OI:{' '}\n                                      <span className={`font-semibold ${getLiquidityColor(volumeCallT2, oiCallT2)}`}>\n                                        {oiCallT2 !== null ? oiCallT2.toLocaleString() : 'N/A'}\n                                      </span>\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className=\"flex items-center justify-between\">\n                                  <span>Liquidity</span>\n                                  <span className={`font-semibold ${getLiquidityColor(volumeCallT1 ?? volumeCallT2, oiCallT1 ?? oiCallT2)}`}>\n                                    {getLiquidityLabel(volumeCallT1 ?? volumeCallT2, oiCallT1 ?? oiCallT2)}\n                                  </span>\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                          <div className=\"rounded-lg border border-fuchsia-400/30 bg-fuchsia-500/10 p-4\">\n                            <p className=\"text-xs uppercase tracking-wide text-fuchsia-200\">Put Spread</p>\n                            <div className=\"mt-3 space-y-2\">\n                              <div className=\"flex items-center justify-between text-sm\">\n                                <span>Current Price</span>\n                                <span className=\"text-2xl font-semibold text-fuchsia-100\">${result.putCalendarSpread}</span>\n                              </div>\n                              <div className=\"flex items-center justify-between text-xs opacity-80\">\n                                <span>For FF 0%</span>\n                                <span className=\"font-semibold\">${result.putCalendarSpreadAt0}</span>\n                              </div>\n                            </div>\n                            {(volumePutT1 !== null || volumePutT2 !== null || oiPutT1 !== null || oiPutT2 !== null) && (\n                              <div className=\"mt-3 space-y-2 text-xs\">\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                  <div>\n                                    <p className=\"uppercase text-[10px] opacity-70\">T1 Flow</p>\n                                    <p className={`font-semibold ${getLiquidityColor(volumePutT1, oiPutT1)}`}>\n                                      {volumePutT1 !== null ? volumePutT1.toLocaleString() : 'N/A'}\n                                    </p>\n                                    <p className={`text-[10px] ${darkMode ? 'text-slate-300' : 'text-slate-500'}`}>\n                                      OI:{' '}\n                                      <span className={`font-semibold ${getLiquidityColor(volumePutT1, oiPutT1)}`}>\n                                        {oiPutT1 !== null ? oiPutT1.toLocaleString() : 'N/A'}\n                                      </span>\n                                    </p>\n                                  </div>\n                                  <div>\n                                    <p className=\"uppercase text-[10px] opacity-70\">T2 Flow</p>\n                                    <p className={`font-semibold ${getLiquidityColor(volumePutT2, oiPutT2)}`}>\n                                      {volumePutT2 !== null ? volumePutT2.toLocaleString() : 'N/A'}\n                                    </p>\n                                    <p className={`text-[10px] ${darkMode ? 'text-slate-300' : 'text-slate-500'}`}>\n                                      OI:{' '}\n                                      <span className={`font-semibold ${getLiquidityColor(volumePutT2, oiPutT2)}`}>\n                                        {oiPutT2 !== null ? oiPutT2.toLocaleString() : 'N/A'}\n                                      </span>\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className=\"flex items-center justify-between\">\n                                  <span>Liquidity</span>\n                                  <span className={`font-semibold ${getLiquidityColor(volumePutT1 ?? volumePutT2, oiPutT1 ?? oiPutT2)}`}>\n                                    {getLiquidityLabel(volumePutT1 ?? volumePutT2, oiPutT1 ?? oiPutT2)}\n                                  </span>\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className={`${cardClass} rounded-lg border border-slate-500/30 p-6`}>\n                        <p className=\"text-sm font-semibold uppercase tracking-wide\">Term Structure Visualisation</p>\n                        <div className=\"mt-4 h-64 w-full\">\n                          <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <LineChart data={chartData}>\n                              <CartesianGrid stroke={darkMode ? '#2f3344' : '#dbeafe'} strokeDasharray=\"3 6\" />\n                              <XAxis dataKey=\"dte\" stroke={darkMode ? '#94a3b8' : '#475569'} tickLine={false} axisLine={false} />\n                              <YAxis stroke={darkMode ? '#94a3b8' : '#475569'} tickLine={false} axisLine={false} />\n                              <Tooltip\n                                contentStyle={{\n                                  backgroundColor: darkMode ? 'rgba(15,23,42,0.9)' : 'rgba(255,255,255,0.9)',\n                                  border: `1px solid ${darkMode ? 'rgba(148,163,184,0.2)' : 'rgba(59,130,246,0.2)'}`,\n                                  borderRadius: 16,\n                                  color: darkMode ? '#e2e8f0' : '#0f172a'\n                                }}\n                              />\n                              <Line type=\"monotone\" dataKey=\"iv\" stroke=\"#38bdf8\" strokeWidth={3} dot={{ r: 4, fill: '#38bdf8' }} />\n                            </LineChart>\n                          </ResponsiveContainer>\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-1 gap-4 lg:grid-cols-2\">\n                        <div className={`${cardClass} rounded-lg border border-sky-400/35 p-6`}>\n                          <p className=\"text-sm font-semibold uppercase tracking-wide text-sky-200\">Call Calendar Spread</p>\n                          <div className=\"mt-4 grid grid-cols-3 gap-3 text-sm\">\n                            <div>\n                              <p className={`text-xs ${subtleTextClass}`}>Front (T1)</p>\n                              <p className=\"font-semibold\">${result.callT1}</p>\n                            </div>\n                            <div>\n                              <p className={`text-xs ${subtleTextClass}`}>Back (T2)</p>\n                              <p className=\"font-semibold\">${result.callT2}</p>\n                            </div>\n                            <div>\n                              <p className={`text-xs ${subtleTextClass}`}>Spread</p>\n                              <p className=\"text-lg font-semibold\">${result.callCalendarSpread}</p>\n                            </div>\n                          </div>\n                          <div className={`mt-3 rounded-lg border border-sky-400/30 bg-sky-500/10 p-3 text-xs font-semibold`}>Max für FF +30%: <span className=\"font-bold\">${result.maxCallCalendarPrice30}</span></div>\n\n                          <div className=\"mt-4 space-y-3\">\n                            <p className=\"text-xs font-semibold uppercase tracking-wide\">Preis-Simulator</p>\n                            <input\n                              type=\"range\"\n                              min=\"0\"\n                              max={parseFloat(result.callCalendarSpread) * 4}\n                              step=\"0.01\"\n                              defaultValue={result.callCalendarSpread}\n                              onChange={(e) => handlePriceSlider(parseFloat(e.target.value), true)}\n                              className=\"h-2 w-full cursor-pointer appearance-none rounded-full bg-gradient-to-r from-sky-400 via-indigo-400 to-purple-400\"\n                            />\n                            <div className=\"flex justify-between text-xs\">\n                              <span>${(parseFloat(result.maxCallCalendarPrice30)).toFixed(2)} (FF 30%)</span>\n                              <span className=\"font-bold\">${callPriceSlider !== null ? callPriceSlider.toFixed(2) : result.callCalendarSpread}</span>\n                              <span>${(parseFloat(result.callCalendarSpread) * 4).toFixed(2)} (max)</span>\n                            </div>\n                            {callPriceSlider !== null && adjustedFFCall !== null && (\n                              <div className={`rounded-lg border p-3 text-center text-sm font-bold ${\n                                adjustedFFCall >= 30\n                                  ? 'border-emerald-400/60 bg-emerald-500/15 text-emerald-200'\n                                  : adjustedFFCall >= 16\n                                  ? 'border-amber-400/60 bg-amber-500/15 text-amber-200'\n                                  : 'border-slate-500/50 bg-slate-500/10'\n                              }`}>\n                                Angepasster FF: {adjustedFFCall.toFixed(2)}%\n                              </div>\n                            )}\n                          </div>\n                        </div>\n\n                        <div className={`${cardClass} rounded-lg border border-fuchsia-400/35 p-6`}>\n                          <p className=\"text-sm font-semibold uppercase tracking-wide text-fuchsia-200\">Put Calendar Spread</p>\n                          <div className=\"mt-4 grid grid-cols-3 gap-3 text-sm\">\n                            <div>\n                              <p className={`text-xs ${subtleTextClass}`}>Front (T1)</p>\n                              <p className=\"font-semibold\">${result.putT1}</p>\n                            </div>\n                            <div>\n                              <p className={`text-xs ${subtleTextClass}`}>Back (T2)</p>\n                              <p className=\"font-semibold\">${result.putT2}</p>\n                            </div>\n                            <div>\n                              <p className={`text-xs ${subtleTextClass}`}>Spread</p>\n                              <p className=\"text-lg font-semibold\">${result.putCalendarSpread}</p>\n                            </div>\n                          </div>\n                          <div className={`mt-3 rounded-lg border border-fuchsia-400/30 bg-fuchsia-500/10 p-3 text-xs font-semibold`}>Max für FF +30%: <span className=\"font-bold\">${result.maxPutCalendarPrice30}</span></div>\n\n                          <div className=\"mt-4 space-y-3\">\n                            <p className=\"text-xs font-semibold uppercase tracking-wide\">Preis-Simulator</p>\n                            <input\n                              type=\"range\"\n                              min=\"0\"\n                              max={parseFloat(result.putCalendarSpread) * 4}\n                              step=\"0.01\"\n                              defaultValue={result.putCalendarSpread}\n                              onChange={(e) => handlePriceSlider(parseFloat(e.target.value), false)}\n                              className=\"h-2 w-full cursor-pointer appearance-none rounded-full bg-gradient-to-r from-pink-400 via-fuchsia-400 to-purple-400\"\n                            />\n                            <div className=\"flex justify-between text-xs\">\n                              <span>${(parseFloat(result.maxPutCalendarPrice30)).toFixed(2)} (FF 30%)</span>\n                              <span className=\"font-bold\">${putPriceSlider !== null ? putPriceSlider.toFixed(2) : result.putCalendarSpread}</span>\n                              <span>${(parseFloat(result.putCalendarSpread) * 4).toFixed(2)} (max)</span>\n                            </div>\n                            {putPriceSlider !== null && adjustedFFPut !== null && (\n                              <div className={`rounded-lg border p-3 text-center text-sm font-bold ${\n                                adjustedFFPut >= 30\n                                  ? 'border-emerald-400/60 bg-emerald-500/15 text-emerald-200'\n                                  : adjustedFFPut >= 16\n                                  ? 'border-amber-400/60 bg-amber-500/15 text-amber-200'\n                                  : 'border-slate-500/50 bg-slate-500/10'\n                              }`}>\n                                Angepasster FF: {adjustedFFPut.toFixed(2)}%\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n\n                      <button\n                        onClick={exportCSV}\n                        className=\"flex w-full items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-emerald-500 via-teal-500 to-sky-500 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 transition-all duration-300 hover:shadow-emerald-500/40\"\n                      >\n                        <Download size={20} /> Ergebnis als CSV exportieren\n                      </button>\n\n                      {tradeHistory.length > 0 && (\n                        <div className={`${cardClass} rounded-lg border border-slate-500/30 p-6`}>\n                          <p className=\"text-sm font-semibold uppercase tracking-wide\">Trade History (letzte 10)</p>\n                          <div className=\"mt-4 max-h-96 space-y-3 overflow-y-auto pr-2 text-sm\">\n                            {tradeHistory.map((trade, idx) => (\n                              <div\n                                key={idx}\n                                className={`rounded-lg border p-4 transition ${\n                                  parseFloat(trade.ff) >= 30\n                                    ? darkMode ? 'border-emerald-400/40 bg-emerald-500/15' : 'border-emerald-200 bg-emerald-50'\n                                    : parseFloat(trade.ff) >= 16\n                                    ? darkMode ? 'border-amber-400/40 bg-amber-500/15' : 'border-amber-200 bg-amber-50'\n                                    : darkMode ? 'border-slate-600 bg-slate-900/70' : 'border-slate-200 bg-white/80'\n                                }`}\n                              >\n                                <div className=\"text-sm font-semibold\">{trade.ticker} · {trade.date} · FF {trade.ff.toFixed(2)}%</div>\n                                <div className={`mt-2 space-y-1 text-xs ${subtleTextClass}`}>\n                                  <div>Aktuell: Call ${parseFloat(trade.callSpreadCurrent).toFixed(4)} | Put ${parseFloat(trade.putSpreadCurrent).toFixed(4)}</div>\n                                  <div>@ FF 30%: Call ${parseFloat(trade.callSpreadFF30).toFixed(4)} | Put ${parseFloat(trade.putSpreadFF30).toFixed(4)}</div>\n                                  <div>@ FF 0%: Call ${parseFloat(trade.callSpreadFF0).toFixed(4)} | Put ${parseFloat(trade.putSpreadFF0).toFixed(4)}</div>\n                                </div>\n                                <p className={`mt-2 text-xs ${subtleTextClass}`}>{trade.timestamp}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <Analytics />\n    </div>\n  );\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}